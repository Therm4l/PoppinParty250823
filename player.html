<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 你可以在这里为新页面设置一个不同的标题 -->
    <title>Playlist - SEU BanG Dream Club</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <script type="text/javascript"  src = "assets/js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript"  src = "assets/js/player.js"></script>
	<script type="text/javascript"  src = "assets/js/progress.js"></script>
	<script type="text/javascript"  src = "assets/js/lyric.js"></script>
	<script type="text/javascript"  src = "assets/js/index.js"></script>
    <!-- 复制了所有原有的 <style> 标签内容 -->
    <style>
        /* Custom styles */
        body{
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light gray background */
        }
        h1, h2 {
            font-weight: 700;
        }
        .section-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
            
        }
        .section-container > .bg_color {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: url('assets/source/ときめきエクスペリエンス！.jpg') center/cover no-repeat;
            transform: translateZ(0);
            filter: blur(100px);
            z-index: -10;
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #3b82f6; /* Blue-500 */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .lang-en {
            display: none;
        }
        .carousel-slide {
            transition: opacity 0.5s ease-in-out;
        }
        .lightbox-btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #3b82f6;
            color: white;
            font-weight: 600;
            text-decoration: none;
            border-radius: 0.5rem;
            transition: background-color 0.3s;
        }
        .lightbox-btn:hover {
            background-color: #2563eb;
        }
        .mobile-nav-scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav-scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #prev-btn, #next-btn {
            z-index: 30;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes sparkle {
            0% { transform: scale(1) rotate(0deg); opacity: 0.7; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 0.7; }
        }
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        @keyframes bounce-subtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        .animate-heartbeat {
            animation: heartbeat 2s infinite ease-in-out;
        }
        .animate-bounce-subtle {
            animation: bounce-subtle 2s infinite ease-in-out;
        }
        .shooting-stars-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 20;
        }
        .shooting-star {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: shooting 3s linear infinite;
            opacity: 0;
        }
        .shooting-star-1 { top: 10%; left: -10px; animation-delay: 0s; }
        .shooting-star-2 { top: 25%; left: -10px; animation-delay: 0.5s; }
        .shooting-star-3 { top: 40%; left: -10px; animation-delay: 1s; }
        .shooting-star-4 { top: 55%; left: -10px; animation-delay: 1.5s; }
        .shooting-star-5 { top: 70%; left: -10px; animation-delay: 2s; }
        .shooting-star-6 { top: 85%; left: -10px; animation-delay: 2.5s; }
        @keyframes shooting {
            0% { transform: translateX(0) translateY(0); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateX(500px) translateY(500px); opacity: 0; }
        }
        /*歌曲列表*/
        .body_left>.body_list{
            width: 100%;
            height: 100%;
        }
        /* --- 歌曲列表重构 (核心修改) --- */
        .body_list > ul > li {
            list-style: none;
            width: 100%;
            height: 50px;
            border-bottom: 1px solid #e5e7eb; /* 使用浅灰色边框 */
            box-sizing: border-box;
            user-select: none;
            
            /* 使用 Flexbox 布局！ */
            display: flex;
            align-items: center; /* 垂直居中 */
            gap: 0.5rem; /* 在列之间添加一些小间距 */
        }
        
        /* 移除所有旧的 float 和 width:% 样式 */
        .body_list > ul > li > div {
            /* float: left; (已移除) */
            line-height: 50px;
            color: black;
            text-align: left; /* 默认居中对齐 */
        }

        /* 定义每一列的尺寸和行为 */
        .list_number {
            flex: 0 0 25px; /* 不伸缩，固定宽度25px */
        }

        .list_name {
            flex: 1 1 0; /* 占据大部分可用空间 */
            min-width: 0; /* Flexbox 关键 hack，允许内容收缩 */
            text-align: left; /* 歌曲名靠左对齐更美观 */
            padding-left: 0.5rem;
        }

        .list_singer {
            flex: 0 1 85px; /* 基础宽度120px，但可以收缩 */
            min-width: 0;
            text-align: left; /* 歌手名也靠左 */
        }

        .list_time {
            flex: 0 0 60px; /* 不伸缩，固定宽度60px */
            padding-right: 0.5rem;
        }
        
        .body_list > ul > li > .list_number2{
            color:transparent !important;
            background:url("assets/images/player/wave_black.gif") no-repeat center center; /* 动画居中 */
        }

        /* --- 新增：长文本滚动 Marquee 效果 --- */
        /* --- MODIFIED: 更健壮的长文本滚动效果 --- */
        .marquee-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
        }

        .marquee-text {
            display: inline-block;
            white-space: nowrap;
            will-change: transform;
            /* 默认状态下不播放动画 */
        }
        
        /* 只有当 .scrolling 类被添加时，才激活动画 */
        .scrolling .marquee-text {
            /* 动画名称, 持续时间(由JS动态设置), 速度曲线, 延迟, 循环次数, 动画方向(来回) */
            animation: marquee-animation linear infinite alternate;
            animation-duration: var(--scroll-duration, 10s); /* 默认10s, 可被JS覆盖 */
        }

        /* 简化的、更可靠的动画关键帧 */
        @keyframes marquee-animation {
            from {
                /* 从起点开始 */
                transform: translateX(5%);
            }
            to {
                /* 滚动到终点 (让文本末尾与容器末尾对齐) */
                transform: translateX(calc(var(--container-width) - 105%));
            }
        }
        .song_info_pic{
            display: inline-block;
            background: url("assets/images/player/album_cover_player.png") no-repeat 0 0;
            width: 200px;
            height: 180px;
        }
        .body_right > .song_info{
            text-align: center; /* 让容器内的所有内容都居中对齐 */
            color: black;
            line-height: 30px;
        }

        /*右边歌词信息*/
        .body_right .song_lyric_content{
            height: 300px;
            overflow: hidden;
            margin-top: 30px;
        }
        
        .song_lyric_content .song_lyric{
            list-style: none;
            line-height: 30px;
            text-align: center;
            color: black;
            
            font-weight: bold;
            
        }
        .song_lyric_content .song_lyric .cur{
            color: #FF3377;
        }
        .music_pre {
            width: 25px;
            height: 25px;
            background: url("assets/images/player/music_next.svg") no-repeat center center;
            background-size: contain;
            transform: rotate(180deg); /* 旋转180度 */
        }
        .music_play {
            width: 45px;
            height: 45px;
            background: url("assets/images/player/music_play.svg") no-repeat center center;
            background-size: contain;
        }
        .music_play2{
            width: 45px;
            height: 45px;
            background: url("assets/images/player/music_play2.svg") no-repeat center center;
            background-size: contain;
        }
        .music_next {
            width: 25px;
            height: 25px;
            background: url("assets/images/player/music_next.svg") no-repeat center center;
            background-size: contain;
        }
        .music_progress{
            height: 40px;
            position: relative;
        }
        .music_progress>.music_progress_top{
            width: 100%;
            height:30px;
            color: black
        }
        .music_progress_top>.music_progress_name:hover{
            opacity: 1;
        }

        /*进度条*/
        .music_progress_bottom{
            width: 100%;
            height: 4px;
            background: gray;
            margin-top: 5px;
            position: relative;
            /*background: red;*/
        }
        .music_progress_bottom>.music_progress_line{
            width: 0px;
            height: 100%;
            background: black;
        }
        .music_progress_line>.music_progress_dot{
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: black;
            position: absolute;
            top: -5px;
            left: 0px;
        }

        /*底部5个按钮*/
        .music_mode1 {
            width: 30px;
            height: 30px;
            background: url("assets/images/player/mode1.svg") no-repeat center center;
            background-size: contain;
        }
        .music_mode2 {
            width: 30px;
            height: 30px;
            background: url("assets/images/player/mode4.svg") no-repeat center center;
            background-size: contain;
        }
        .music_mode3 {
            width: 30px;
            height: 30px;
            background: url("assets/images/player/mode3.svg") no-repeat center center;
            background-size: contain;
        }
        .music_mode4 {
            width: 30px;
            height: 30px;
            background: url("assets/images/player/mode2.svg") no-repeat center center;
            background-size: contain;
        }
        .music_voice {
            height: 40px;
            display: flex;
            align-items: center; /* 垂直居中对齐 */
            gap: 8px; /* 为图标和音量条添加间隔 */
        }
        .music_voice>.music_voice_icon{
            width: 30px;
            height: 30px;
            background: url("assets/images/player/voice1.svg") no-repeat center center;
            background-size: contain;
        }
        .music_voice>.music_voice_icon2{
            width: 30px;
            height: 30px;
            background: url("assets/images/player/voice2.svg") no-repeat center center;
            background-size: contain;
        }
        .music_voice>.music_voice_bottom{
            width: 70px;
            height: 4px;
            background: black;
            display: flex;
            align-items: center;
        }
        .music_voice_bottom>.music_voice_line{
            width: 70px;
            height: 100%;
            background: gray;
            position: relative;
            flex-grow: 1;
        }
        .music_voice_line>.music_voice_dot{
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: black;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            left: 70px;
        }
    </style>
</head>
<body class="text-gray-800 flex flex-col min-h-screen">

    <!-- 1. 顶部固定导航栏 -->
    <!-- [MODIFIED] START: 完整的、已修改的 Header 部分，可直接替换 -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 relative">
                <!-- 左侧标题 (保持不变) -->
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-900">
                        <span class="lang-zh">东南大学邦邦同好会</span>
                        <span class="lang-en">SEU BanG Dream Club</span>
                    </h1>
                </div>

                <!-- 右侧导航容器 -->
                <div>
                    <!-- 桌面端导航 (中等屏幕以上显示) -->
                    <div class="hidden md:flex items-center space-x-2">
                        <a href="#info" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">活动简介</span>
                            <span class="lang-en">Info</span>
                        </a>
                        <a href="#gallery" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">创作</span>
                            <span class="lang-en">Crafts</span>
                        </a>
                        <a href="#message-board" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">留言板</span>
                            <span class="lang-en">Message Board</span>
                        </a>
                        <a href="#credits" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">致谢</span>
                            <span class="lang-en">Acknowledgements</span>
                        </a>
                        <a href="#links" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">社交媒体</span>
                            <span class="lang-en">Social</span>
                        </a>
                        <a href="player.html" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">歌单(test)</span>
                            <span class="lang-en">Playlist</span>
                        </a>
                        <button id="lang-switch-btn-desktop" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-3 py-1 rounded-full text-xs transition-colors">
                            <span class="lang-zh">EN</span>
                            <span class="lang-en">中文</span>
                        </button>
                    </div>

                    <!-- 移动端菜单按钮 (仅在中等屏幕以下显示) -->
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="text-gray-600 hover:text-gray-900 p-2 rounded-md">
                            <i class="fa-solid fa-ellipsis-vertical text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- 移动端下拉菜单 (默认隐藏，通过 JS 控制) -->
                <div id="mobile-menu" class="hidden md:hidden absolute top-full right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 p-2 space-y-1">
                    <a href="#info" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">活动简介</span>
                        <span class="lang-en">Info</span>
                    </a>
                    <a href="#gallery" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">创作</span>
                        <span class="lang-en">Crafts</span>
                    </a>
                    <a href="#message-board" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">留言板</span>
                        <span class="lang-en">Message Board</span>
                    </a>
                    <a href="#credits" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">致谢</span>
                        <span class="lang-en">Acknowledgements</span>
                    </a>
                    <a href="#links" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">社交媒体</span>
                        <span class="lang-en">Social</span>
                    </a>
                    <a href="player.html" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">歌单(test)</span>
                        <span class="lang-en">Playlist</span>
                    </a>
                    <button id="lang-switch-btn-mobile" class="w-full text-left bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-3 py-2 rounded-md text-sm transition-colors">
                        <span class="lang-zh">切换为 EN</span>
                        <span class="lang-en">Switch to 中文</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>
    <!-- [MODIFIED] END: Header 部分结束 -->

    <!-- 主内容区域 (已清空) -->
    <main class="flex-grow", id="player">
        <div class="section-container rounded-2xl shadow-2xl">
            <div class="bg_color"></div>
            <div class="body_in flex flex-col md:flex-row gap-8 mb-8">
                <div class="body_left w-full md:w-2/3">
                    <div class="body_list">
                        <ul>
                            <!-- MODIFIED: 表头也使用 Flexbox 布局 -->
                            <li class="list_title">
                                <div class="list_number"></div>
                                <div class="list_name font-bold">
                                    <span class="lang-zh">歌曲</span>
                                    <span class="lang-en">Song</span>
                                </div>
                                <div class="list_singer font-bold">
                                    <span class="lang-zh left">歌手</span>
                                    <span class="lang-en left">Artist</span>
                                </div>
                                <div class="list_time font-bold">
                                    <span class="lang-zh">时长</span>
                                    <span class="lang-en">Duration</span>
                                </div>
                            </li>
                            <!-- 你的 JS 会在这里动态添加歌曲 li -->
                        </ul>

                    </div>
                </div>
                <div class="body_right w-full md:w-1/3">
                    <div class="song_info flex flex-col items-center">
                        <a class="song_info_pic">
                            <img src="assets/images/player/album_cover_player.png" alt="">
                        </a>
                        <div class="song_info_name">
                            <span class="lang-zh">歌曲名称：</span>
                            <span class="lang-en">Title: </span>
                            <a></a>
                        </div>
                        <div class="song_info_singer">
                            <span class="lang-zh">歌手名：</span>
                            <span class="lang-en">Artist: </span>
                            <a></a>
                        </div>
                        <div class="song_info_album">
                            <span class="lang-zh">专辑名：</span>
                            <span class="lang-en">Album: </span>
                            <a></a>
                        </div>

                    </div>
                    <div class="song_lyric_content flex-grow">
                        <div class="song_lyric"></div>
                    </div>
                </div>
            </div>
            
            <!-- === MODIFIED: 响应式底部控制栏 === -->
            <div class="foot p-4 md:p-0">
                <!-- 
                  - Mobile: flex-col (垂直排列), items-center (水平居中), gap-y-4 (行间距)
                  - Desktop (md:): flex-row (水平排列), justify-between (两端对齐)
                -->
                <div class="foot_in flex flex-col items-center gap-y-4 md:flex-row md:items-center md:justify-between md:gap-x-4">
                    
                    <!-- Row 1 (Mobile) / Left Group (Desktop): Playback Controls -->
                    <div class="flex items-center justify-center space-x-4">
                        <a class="music_pre"></a>
                        <a class="music_play"></a>
                        <a class="music_next"></a>
                    </div>
                    
                    <!-- Row 2 (Mobile) / Center Group (Desktop): Progress Bar -->
                    <!-- Mobile: w-full (占满整行以便居中), Desktop: w-auto & flex-grow (自动伸展) -->
                    <div class="music_progress w-full md:w-auto md:flex-grow">
                        <div class="music_progress_top flex justify-between">
                            <span class="music_progress_time">00:00/00:00</span>
                        </div>
                        <div class="music_progress_bottom">
                            <div class="music_progress_line">
                                <div class="music_progress_dot"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Row 3 (Mobile) / Right Group (Desktop): Mode & Volume -->
                    <div class="flex items-center justify-center space-x-4">
                        <a class="music_mode1"></a>
                        <div class="music_voice">
                            <a class="music_voice_icon"></a>
                            <div class="music_voice_bottom">
                                <div class="music_voice_line">  
                                    <div class="music_voice_dot"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- === 修改结束 === -->
            <audio src=""></audio>
    </main>

    <!-- 底部 License -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 <span class="lang-zh">东南大学邦邦同好会</span><span class="lang-en">SEU Bang Dream Club</span>. All Rights Reserved.</p>
            <p class="mt-2 text-sm text-gray-400">
                <span class="lang-zh">本项目采用 <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT 许可证</a> 进行授权。</span>
                <span class="lang-en">This project is licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT License</a>.</span>
            </p>
        </div>
    </footer>

    <!-- 保留了所有必要的 JS 逻辑，但移除了具体内容的交互逻辑 -->
    <!-- 你可以根据新页面的需要，添加或删除这些JS功能 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- 语言切换逻辑 ---
            const langSwitchBtn = document.getElementById('lang-switch-btn');
            // [替换] 原有的语言切换逻辑替换为这个新函数
            const htmlEl = document.documentElement;
            let currentLang = 'zh';
            const zhElements = document.querySelectorAll('.lang-zh');
            const enElements = document.querySelectorAll('.lang-en');
            // --- 移动端导航栏和语言切换逻辑 ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const langSwitchBtnDesktop = document.getElementById('lang-switch-btn-desktop');
            const langSwitchBtnMobile = document.getElementById('lang-switch-btn-mobile');
            function setLanguage(lang) {
                htmlEl.lang = lang === 'zh' ? 'zh-CN' : 'en';
                // 注意：这里使用 'inline-block' 确保布局正确
                zhElements.forEach(el => el.style.display = lang === 'zh' ? 'inline-block' : 'none');
                enElements.forEach(el => el.style.display = lang === 'en' ? 'inline-block' : 'none');
                
                currentLang = lang;
            }

            function toggleLanguage() {
                setLanguage(currentLang === 'zh' ? 'en' : 'zh');
            }

            // [新增] 移动端菜单的点击事件
            mobileMenuButton.addEventListener('click', (event) => {
                event.stopPropagation(); // 防止点击事件冒泡到window
                mobileMenu.classList.toggle('hidden');
            });

            // [新增] 为两个语言切换按钮绑定事件
            langSwitchBtnDesktop.addEventListener('click', toggleLanguage);
            langSwitchBtnMobile.addEventListener('click', toggleLanguage);

            // [新增] (可选但推荐) 点击页面其他地方可以关闭菜单
            window.addEventListener('click', (event) => {
                if (!mobileMenu.classList.contains('hidden') && !mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target)) {
                    mobileMenu.classList.add('hidden');
                }
            });

            // [新增] (可选但推荐) 点击菜单中的链接后自动关闭菜单
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // [保留] 并确保调用一次，初始化页面语言
            setLanguage(currentLang);
            
            // --- 其他页面的交互逻辑 (如轮播、留言板等) 已被移除 ---
            // --- 你可以在这里为新页面添加专属的JS代码 ---
            // --- MODIFIED: 升级版滚动检查函数，带动态速度 ---
            function checkAndApplyScrolling() {
                const marqueeContainers = document.querySelectorAll(".marquee-container");

                marqueeContainers.forEach(container => {
                    const textSpan = container.querySelector(".marquee-text");
                    if (!textSpan) return;

                    const containerWidth = container.clientWidth;
                    const textWidth = textSpan.scrollWidth;

                    // 判断文本的实际宽度是否大于其容器的宽度
                    const isOverflowing = textWidth > containerWidth;

                    if (isOverflowing) {
                        // 1. 如果溢出，添加 .scrolling 类来激活 CSS 动画
                        container.classList.add("scrolling");

                        // 2. 计算需要滚动的距离
                        const overflowDistance = textWidth - containerWidth;

                        // 3. 根据距离计算一个合理的动画时长 (例如每100像素需要2.5秒)
                        const duration = (overflowDistance / 100) * 2.5;

                        // 4. 将计算出的时长和容器宽度设置到CSS变量中
                        textSpan.style.setProperty('--scroll-duration', `${Math.max(3, duration)}s`); // 最短不少于3秒
                        textSpan.style.setProperty('--container-width', `${containerWidth}px`);
                    } else {
                        // 如果不溢出，移除 .scrolling 类
                        container.classList.remove("scrolling");
                    }
                });
            }
            // --- 修改结束 ---
            // 你需要在歌曲列表加载完成后调用这个函数。
            // 你的 index.js 很可能有一个加载完成的回调，或者你可以用 MutationObserver
            // 一个简单的替代方案是延迟执行，或者在 Player 对象上找一个事件。
            // 例如，在 index.js 加载列表的 $.each 循环后调用 window.checkAndApplyScrolling()。
            // 为了方便，我们先在这里定义它，并做一个简单的延迟执行。
            window.checkAndApplyScrolling = checkAndApplyScrolling;

            // 稍微延迟后执行，以确保列表已渲染
            setTimeout(() => {
                window.checkAndApplyScrolling();
            }, 500); 

            // 当窗口大小改变时，也需要重新检查
            window.addEventListener('resize', window.checkAndApplyScrolling);

        });
    </script>
</body>
</html>