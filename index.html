<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>欢迎 - SEU BanG Dream Club</title>

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .splash-container {
            background-image: url('assets/images/启动页.png'); /* <-- 确保路径正确 */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .overlay {
            background-color: rgba(18, 18, 48, 0.6);
            backdrop-filter: blur(2px);
        }
        
        .text-shadow {
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8);
        }

        #shooting-stars-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; pointer-events: none; z-index: 0;
        }

        .shooting-star {
            position: absolute; width: 2px; height: 80px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), transparent);
            border-radius: 50%; filter: drop-shadow(0 0 6px white);
            animation: shooting-star-animation 5s linear infinite;
        }

        @keyframes shooting-star-animation {
            0% { transform: translateY(-100px) translateX(var(--start-x)) rotate(45deg); opacity: 1; }
            100% { transform: translateY(calc(100vh + 100px)) translateX(calc(var(--start-x) - 100vh)) rotate(45deg); opacity: 0; }
        }
        
        /* 滑动解锁模块样式 */
        #slider-container {
            position: relative;
            height: 6rem;
            width: 25rem;
            margin: 4rem auto 0; /* mt-16 and centered */
        }

        #start-slider-btn {
            position: absolute; inset: 0; margin: auto;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        #start-slider-btn:hover { transform: scale(1.1); }

        #slider-track {
            position: absolute;
            width: 20rem;
            height: 3rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(3px);
            transition: opacity 0.3s ease;
            overflow: visible;
        }

        /* MODIFIED: Handle starts from left */
        #slider-handle {
            position: absolute; top: 0;
            left: -2rem;
            width: 6rem; /* 64px */
            height: 100%;
            cursor: grab;
            transition: left 0.2s ease;
        }
        
        /* 装饰性边框样式 */
        .corner-border {
            position: absolute; width: 50px; height: 50px;
            border-style: solid; border-color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }
        .top-left { top: 20px; left: 20px; border-width: 4px 0 0 4px; }
        .top-right { top: 20px; right: 20px; border-width: 4px 4px 0 0; }
        .bottom-left { bottom: 20px; left: 20px; border-width: 0 0 4px 4px; }
        .bottom-right { bottom: 20px; right: 20px; border-width: 0 4px 4px 0; }

        @keyframes fade-out {
            from { opacity: 1; } to { opacity: 0; }
        }
        .page-fade-out {
            animation: fade-out 0.5s ease-out forwards;
        }

        @keyframes text-glow {
            0%, 100% { color: #d1d5db; text-shadow: none; } /* Tailwind gray-300 */
            50% { color: #fff; text-shadow: 0 0 8px rgba(255, 255, 255, 0.8); }
        }

        @keyframes text-fade-in-out {
            0%, 100% { opacity: 1; transform: translateY(0); }
            50% { opacity: 0; transform: translateY(-5px); }
        }

        #slider-text {
            animation: text-glow 3s ease-in-out infinite, text-fade-in-out 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gray-900">

    <main class="splash-container h-screen w-screen relative">
        
        <div class="corner-border top-left"></div>
        <div class="corner-border top-right"></div>
        <div class="corner-border bottom-left"></div>
        <div class="corner-border bottom-right"></div>

        <div id="shooting-stars-container"></div>
        
        <div class="overlay h-full w-full flex flex-col items-center justify-center p-4 relative z-10">
            <div class="text-center text-white">
                <img src="assets/images/Poppin'Party_logo.svg" alt="Logo" class="w-40 md:w-72 h-auto mx-auto mb-4 md:mb-6">
                <h1 class="text-4xl md:text-6xl font-bold text-shadow mb-3">
                    Poppin' Party <br class="hidden md:block"> Global LIVE 2025 <br> in Shanghai
                </h1>
                <p class="text-lg md:text-2xl text-shadow">
                    A Fan Site by SEU BanG Dream Club
                </p>

                <!-- MODIFIED: 滑动解锁模块 -->
                <div id="slider-container">
                    <!-- 1. 初始按钮 (居中) -->
                    <button id="start-slider-btn" class="w-16 h-16 border-2 border-white rounded-full flex items-center justify-center">
                        <i class="fa-solid fa-key text-2xl animate-pulse"></i>
                    </button>
                    
                    <!-- 2. 滑动轨道 (默认隐藏) -->
                    <div id="slider-track" class="rounded-full flex items-center justify-center text-gray-300 opacity-0 hidden relative">
                        <span id="slider-text" class="absolute inset-0 flex items-center justify-center pointer-events-none">
                            Slide to enter
                        </span>
                        
                        <div id="handle-wrapper" class="absolute top-0 left-0 h-full">
                            <div id="slider-handle" class="relative h-full flex items-center justify-center cursor-grab transition-all duration-200 ease-in-out">
                                <img src="assets/images/logo.png" alt="slider handle" class="h-16 w-16 object-contain">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // --- 流星效果初始化 (无变化) ---
    const starsContainer = document.getElementById('shooting-stars-container');
    const starCount = 10;
    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'shooting-star';
        star.style.setProperty('--start-x', `${Math.random() * 100}vw`);
        star.style.animationDelay = `${Math.random() * 5}s`;
        star.style.animationDuration = `${3 + Math.random() * 4}s`;
        starsContainer.appendChild(star);
    }

    // --- MODIFIED: 滑动解锁逻辑 ---
    const startBtn = document.getElementById('start-slider-btn');
    const sliderTrack = document.getElementById('slider-track');
    const sliderHandle = document.getElementById('slider-handle');
    const mainContent = document.querySelector('main');
    const sliderText = document.getElementById('slider-text');
    const texts = ["滑动进入", "Slide to enter"];
    let textIndex = 0;
    const intervalDuration = 5000;
    const initialOffset = 32;

    let isDragging = false;
    let startX = 0;
    let trackRect = null;

    // 步骤1：点击初始按钮，切换到滑动条模式
    startBtn.addEventListener('click', () => {
        startBtn.style.opacity = '0';
        sliderTrack.classList.remove('hidden');
        
        setTimeout(() => {
            startBtn.style.display = 'none';
            sliderTrack.style.opacity = '1';
        }, 300);

        setInterval(() => {
            textIndex = (textIndex + 1) % texts.length;
            sliderText.textContent = texts[textIndex];
        }, intervalDuration);

    });

    // --- 剩余的拖动逻辑 (startDrag, onDrag, endDrag) 保持完全不变 ---
    // 步骤2：开始拖动
    const startDrag = (e) => {
        e.preventDefault();
        isDragging = true;
        sliderHandle.style.cursor = 'grabbing';
        sliderHandle.style.transition = 'none';
        trackRect = sliderTrack.getBoundingClientRect();
        startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
    };

    // 步骤3：拖动中
    const onDrag = (e) => {
        if (!isDragging) return;
        
        const currentX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
        let deltaX = currentX - startX;

        // 边界检测
        const handleWidth = sliderHandle.offsetWidth;
        const maxDrag = trackRect.width + initialOffset - handleWidth;
        if (deltaX < 0) deltaX = 0;
        if (deltaX > maxDrag) deltaX = maxDrag;
        
        sliderHandle.style.left = `${deltaX}px`;
    };

    // 步骤4：结束拖动
    const endDrag = (e) => {
        if (!isDragging) return;
        
        isDragging = false;
        sliderHandle.style.cursor = 'grab';
        sliderHandle.style.transition = 'left 0.2s ease, background-color 0.3s ease';

        const handleWidth = sliderHandle.offsetWidth;
        const maxDrag = trackRect.width + initialOffset - handleWidth;
        const currentLeft = sliderHandle.offsetLeft;

        if (currentLeft >= maxDrag - 5) {
            // 滑动成功
            console.log('Unlocked!');
            sliderHandle.style.left = `${maxDrag}px`; 
            
            mainContent.classList.add('page-fade-out');
            setTimeout(() => {
                window.location.href = 'main.html';
            }, 500);
            
        } else {
            // 滑动未完成，弹回
            sliderHandle.style.left = `-${initialOffset}px`;
        }
    };
    
    // 绑定事件
    sliderHandle.addEventListener('mousedown', startDrag);
    sliderHandle.addEventListener('touchstart', startDrag, { passive: false });
    document.addEventListener('mousemove', onDrag);
    document.addEventListener('touchmove', onDrag);
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchend', endDrag);
});
</script>

</body>
</html>
