<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEU Bang Dream Club for PPP Live in Shanghai, 2025</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light gray background */
        }
        h1, h2 {
            font-weight: 700;
        }
        .section-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #3b82f6; /* Blue-500 */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        /* ä¸ºè‡´è°¢åå•ä¸­çš„å¯ç‚¹å‡»é“¾æ¥æ·»åŠ æ ·å¼ */
        .credit-link {
            @apply text-purple-300 underline decoration-dotted underline-offset-4 transition-colors duration-300;
        }

        .credit-link:hover {
            @apply text-pink-300 decoration-solid;
        }
        /* Hide elements by default for language switching */
        .lang-en {
            display: none;
        }
        /* Carousel and Lightbox Styles */
        .carousel-slide {
            transition: opacity 0.5s ease-in-out;
        }
        .lightbox-btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #3b82f6;
            color: white;
            font-weight: 600;
            text-decoration: none;
            border-radius: 0.5rem;
            transition: background-color 0.3s;
        }
        .lightbox-btn:hover {
            background-color: #2563eb;
        }
        /* MODIFIED: Helper class to hide scrollbar for mobile nav */
        .mobile-nav-scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav-scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* --- MODIFIED: z-index fix for carousel buttons --- */
        /* ç¡®ä¿è½®æ’­æŒ‰é’®çš„å±‚çº§é«˜äºéŸ³ä¹æ’­æ”¾å™¨ï¼Œä»¥è§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»é—®é¢˜ */
        #prev-btn, #next-btn {
            z-index: 30;
        }
        
        /* --- MODIFIED: z-index for music player --- */
        /* ä¸ºéŸ³ä¹æ’­æ”¾å™¨è®¾ç½®ä¸€ä¸ªæ˜ç¡®çš„ã€è¾ƒä½çš„z-index */
        #music-player {
            z-index: 20; 
            user-select: none; /* é˜²æ­¢æ‹–åŠ¨æ—¶é€‰ä¸­æ–‡æœ¬ */
        }
        #music-player button, #music-player i {
            pointer-events: auto; /* ç¡®ä¿æ’­æ”¾å™¨å†…éƒ¨çš„æŒ‰é’®å¯ä»¥è¢«ç‚¹å‡» */
        }
        #music-player i {
             pointer-events: none; /* è®©äº‹ä»¶ç©¿é€åˆ°çˆ¶çº§æŒ‰é’® */
        }
        
        /* Message Board Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes sparkle {
            0% { transform: scale(1) rotate(0deg); opacity: 0.7; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 0.7; }
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        @keyframes bounce-subtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .animate-heartbeat {
            animation: heartbeat 2s infinite ease-in-out;
        }
        
        .animate-bounce-subtle {
            animation: bounce-subtle 2s infinite ease-in-out;
        }
        
        
        /* Shooting stars */
        .shooting-stars-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 20;
        }
        
        .shooting-star {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: shooting 3s linear infinite;
            opacity: 0;
        }
        
        .shooting-star-1 {
            top: 10%;
            left: -10px;
            animation-delay: 0s;
        }
        
        .shooting-star-2 {
            top: 25%;
            left: -10px;
            animation-delay: 0.5s;
        }
        
        .shooting-star-3 {
            top: 40%;
            left: -10px;
            animation-delay: 1s;
        }
        
        .shooting-star-4 {
            top: 55%;
            left: -10px;
            animation-delay: 1.5s;
        }
        
        .shooting-star-5 {
            top: 70%;
            left: -10px;
            animation-delay: 2s;
        }
        
        .shooting-star-6 {
            top: 85%;
            left: -10px;
            animation-delay: 2.5s;
        }
        
        @keyframes shooting {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateX(500px) translateY(500px);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 1. é¡¶éƒ¨å›ºå®šå¯¼èˆªæ  -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-900">
                        <span class="lang-zh">ä¸œå—å¤§å­¦é‚¦é‚¦åŒå¥½ä¼š</span>
                        <span class="lang-en">SEU Bang Dream Club</span>
                    </h1>
                </div>
                <!-- MODIFIED: Nav links container for mobile scroll -->
                <div class="flex items-center space-x-4 overflow-x-auto whitespace-nowrap mobile-nav-scrollbar-hide ml-4 flex-shrink">
                    <a href="#info" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">æ´»åŠ¨ä»‹ç»</span>
                        <span class="lang-en">Info</span>
                    </a>
                    <a href="#gallery" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">æ´»åŠ¨å›¾é›†</span>
                        <span class="lang-en">Gallery</span>
                    </a>
                    <a href="#links" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">ç›¸å…³é“¾æ¥</span>
                        <span class="lang-en">Links</span>
                    </a>
                    <a href="#message-board" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">ç•™è¨€æ¿</span>
                        <span class="lang-en">Message Board</span>
                    </a>
                    <a href="#credits" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">è‡´è°¢</span>
                        <span class="lang-en">Acknowledgements</span>
                    </a>
                    <button id="lang-switch-btn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-3 py-1 rounded-full text-xs transition-colors">
                        <span class="lang-zh">EN</span>
                        <span class="lang-en">ä¸­æ–‡</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <!-- 2. ä¿¡æ¯æ¨¡å— (æ´»åŠ¨ä»‹ç») -->
        <section id="info" class="section-container text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                <span class="lang-zh">Poppin' Party Global LIVE 2025<br>ã€ŒShiny High-Five!!ã€</span>
                <span class="lang-en">Poppin' Party Global LIVE 2025<br>"Shiny High-Five!!"</span>
            </h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-6">
                <span class="lang-zh">BanG Dream! ä¸Šæµ·å…¬æ¼”2025<br>
                    Poppin' Party Global LIVE 2025ã€ŒShiny High-Five!!ã€å°†äº8æœˆ23æ—¥å¼€å¹•ï¼<br>
                    é‚£äº›è®©ä½ çœ¼çœ¶å‘çƒ­çš„ç¬é—´ï¼Œé‚£äº›æ”¹å˜ä½ äººç”Ÿçš„éŸ³ç¬¦ï¼Œå°†ç‚¹äº®è¿™ç‰‡å¤œç©ºï¼</span>
                <span class="lang-en">BanG Dream! Shanghai Performance 2025<br>
                    Poppin' Party Global LIVE 2025 "Shiny High-Five!!" opens on August 23rd!<br>
                    Moments that will make your eyes melt, and notes that will change your life, will light up the night sky!</span>
            </p>
            <div class="flex justify-center space-x-4 mb-8">
                <a href="https://www.google.com/maps/place/Shanghai+Oriental+Sports+Center/@31.1553068,121.4776243,17z/data=!4m14!1m7!3m6!1s0x35b27b16a397911f:0x38fff885e6c9d84f!2sShanghai+Oriental+Sports+Center!8m2!3d31.155555!4d121.47303!16s%2Fm%2F06_v4mf!3m5!1s0x35b27b0f97160303:0xb55cbf032d2fbed1!8m2!3d31.155315!4d121.477966!16s%2Fg%2F11gzxpxwb?entry=ttu&g_ep=EgoyMDI1MDczMC4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="bg-gray-800 text-white font-semibold px-6 py-2 rounded-lg shadow-md hover:bg-gray-900 transition-colors">
                    <span class="lang-zh">æŸ¥çœ‹åœ°å›¾</span>
                    <span class="lang-en">View Map</span>
                </a>
            </div>
            <!-- NEW: Image Carousel -->
            <div id="image-carousel" class="relative w-full max-w-4xl mx-auto rounded-lg shadow-lg overflow-hidden group cursor-pointer">
                <!-- Slide 1 -->
                <div class="carousel-slide">
                    <img src="assets/images/ppp_shanghai.jpg" alt="æ´»åŠ¨ä¸»è§†è§‰ A" class="w-full h-full object-cover">
                </div>
                <!-- Slide 2 -->
                <div class="carousel-slide hidden">
                    <img src="assets/images/ppp_10_preview.jpg" alt="æ´»åŠ¨ä¸»è§†è§‰ B" class="w-full h-full object-cover">
                </div>

                <!-- === MODIFIED: å…¨æ–°æ ·å¼çš„ç¿»é¡µæŒ‰é’® === -->
                <button id="prev-btn" 
                        class="absolute top-1/2 left-4 transform -translate-y-1/2 
                            w-12 h-12 rounded-full flex items-center justify-center
                            bg-gradient-to-r from-pink-500 to-purple-500 text-white 
                            shadow-lg opacity-80 hover:opacity-100 
                            transition-all duration-300 ease-in-out 
                            hover:scale-110 hover:shadow-xl z-30">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button id="next-btn" 
                        class="absolute top-1/2 right-4 transform -translate-y-1/2 
                            w-12 h-12 rounded-full flex items-center justify-center 
                            bg-gradient-to-l from-pink-500 to-purple-500 text-white 
                            shadow-lg opacity-80 hover:opacity-100 
                            transition-all duration-300 ease-in-out 
                            hover:scale-110 hover:shadow-xl z-30">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
                <!-- === ä¿®æ”¹ç»“æŸ === -->
                
            </div>
        </section>


        <!-- 3. å®ç‰©æ¨¡å— (ç°åœºå›¾é›†) - é‡æ„ç‰ˆ -->
        <section id="gallery" class="section-container bg-white">
            <!-- ä¸»æ ‡é¢˜ -->
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">
                <span class="lang-zh">èŠ±ç¯®ä¸æ— æ–™</span>
                <span class="lang-en">Flower Basket & Free Gifts</span>
            </h2>

            <!-- === åˆ†ç»„ 1: èŠ±ç¯® (2å¼ å›¾) === -->
            <div class="mb-16">
                <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 pb-2">
                    <span class="lang-zh">ğŸ’ èŠ±ç¯®</span>
                    <span class="lang-en">ğŸ’ Flower Basket</span>
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- å›¾ 1.1 -->
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/flower_basket_visual.jpg" 
                            data-lightbox-src="assets/images/flower_basket_visual_large.jpg"
                            alt="èŠ±ç¯®ä¸»è§†è§‰å›¾" 
                            class="w-full rounded-md mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/dbeafe/3b82f6?text=èŠ±ç¯®ä¸»è§†è§‰å›¾';">
                        <p class="text-gray-700 text-center">
                            <span class="lang-zh">ä¸»è§†è§‰å›¾</span>
                            <span class="lang-en">Main Visual</span>
                        </p>
                    </div>
                    <!-- å›¾ 1.2 -->
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/flower_basket_design.jpg" 
                            data-lightbox-src="assets/images/flower_basket_design_large.jpg"
                            alt="èŠ±ç¯®è®¾è®¡å›¾" 
                            class="w-full rounded-md mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/dbeafe/3b82f6?text=èŠ±ç¯®è®¾è®¡å›¾';">
                        <p class="text-gray-700 text-center">
                            <span class="lang-zh">è®¾è®¡å›¾</span>
                            <span class="lang-en">Design</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- === åˆ†ç»„ 2: æ— æ–™A (2å¼ å›¾) === -->
            <div class="mb-16">
                <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 pb-2">
                    <span class="lang-zh">âœ‰ï¸ æ— æ–™ A (å¡ç‰‡)</span>
                    <span class="lang-en">âœ‰ï¸ Free Gift A (Cards)</span>
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- å›¾ 2.1 -->
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/card_front.jpg" 
                            data-lightbox-src="assets/images/card_front_large.jpg"
                            alt="å¡ç‰‡æ­£é¢" 
                            class="w-full rounded-md mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/fecaca/991b1b?text=å¡ç‰‡æ­£é¢';">
                        <p class="text-gray-700 text-center">
                            <span class="lang-zh">å¡ç‰‡æ­£é¢</span>
                            <span class="lang-en">Card Front</span>
                        </p>
                    </div>
                    <!-- å›¾ 2.2 -->
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/card_back.jpg" 
                            data-lightbox-src="assets/images/card_back_large.jpg"
                            alt="å¡ç‰‡èƒŒé¢" 
                            class="w-full rounded-md mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/fecaca/991b1b?text=å¡ç‰‡èƒŒé¢';">
                        <p class="text-gray-700 text-center">
                            <span class="lang-zh">å¡ç‰‡èƒŒé¢</span>
                            <span class="lang-en">Card Back</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- === åˆ†ç»„ 3: æ— æ–™B (6å¼ å›¾) === -->
            <div>
                <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 pb-2">
                    <span class="lang-zh">ğŸŒŸ æ— æ–™ B (å¾½ç« )</span>
                    <span class="lang-en">ğŸŒŸ Free Gift B (Badges)</span>
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                    <!-- å›¾ 3.1 - 3.6 -->
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/ksm.jpg" data-lightbox-src="assets/images/ksm.jpg" alt="å¾½ç«  1" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +1';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  1</span><span class="lang-en">Badge 1</span></p>
                    </div>
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/tae.jpg" data-lightbox-src="assets/images/tae.jpg" alt="å¾½ç«  2" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +2';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  2</span><span class="lang-en">Badge 2</span></p>
                    </div>
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/rimi.jpg" data-lightbox-src="assets/images/rimi.jpg" alt="å¾½ç«  3" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +3';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  3</span><span class="lang-en">Badge 3</span></p>
                    </div>
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/saaya.jpg" data-lightbox-src="assets/images/saaya.jpg" alt="å¾½ç«  4" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +4';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  4</span><span class="lang-en">Badge 4</span></p>
                    </div>
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/ars.jpg" data-lightbox-src="assets/images/ars.jpg" alt="å¾½ç«  5" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +5';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  5</span><span class="lang-en">Badge 5</span></p>
                    </div>
                    <div class="gallery-item card-hover bg-gray-50 p-4 rounded-lg shadow-md cursor-pointer">
                        <img src="assets/images/POPIPA.jpg" data-lightbox-src="assets/images/POPIPA.jpg" alt="å¾½ç«  6" class="w-full rounded-md mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=å¾½ç« +6';">
                        <p class="text-gray-700 text-center"><span class="lang-zh">å¾½ç«  6</span><span class="lang-en">Badge 6</span></p>
                    </div>
                </div>
            </div>
        </section>


        <!-- 4. ç•™è¨€æ¿æ¨¡å— -->
        <section id="message-board" class="section-container">
            <h2 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-8 relative z-10 animate-pulse">
                <span class="lang-zh">ç•™è¨€æ¿</span>
                <span class="lang-en">Message Board</span>
            </h2>
            <div class="max-w-4xl mx-auto rounded-2xl p-8 relative overflow-hidden shadow-2xl" 
                 style="background: url('assets/images/mylove.jpg') center/cover no-repeat; 
                        backdrop-filter: blur(1px);">
                <!-- Shooting stars -->
                <div class="shooting-stars-container">
                    <div class="shooting-star shooting-star-1"></div>
                    <div class="shooting-star shooting-star-2"></div>
                    <div class="shooting-star shooting-star-3"></div>
                    <div class="shooting-star shooting-star-4"></div>
                    <div class="shooting-star shooting-star-5"></div>
                    <div class="shooting-star shooting-star-6"></div>
                </div>
                
                <!-- Search Module -->
                <div class="mb-6 relative z-10 backdrop-blur-[2px] bg-white/30 rounded-xl shadow-inner p-4">
                    <div class="flex flex-col sm:flex-row">
                        <input type="text" id="search-input" placeholder="æœç´¢ç•™è¨€è€…..." data-en-placeholder="Search by author..."
                               class="flex-grow px-4 py-2 rounded-lg sm:rounded-r-none border-0 focus:ring-2 focus:ring-pink-500 focus:outline-none mb-2 sm:mb-0">
                        <div class="flex">
                            <button id="search-btn" class="flex-grow sm:flex-grow-0 bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded-lg sm:rounded-r-lg hover:from-pink-600 hover:to-purple-600 transition-all">
                                <span class="lang-zh">æœç´¢</span>
                                <span class="lang-en">Search</span>
                            </button>
                            <button id="reset-btn" class="ml-2 flex-grow sm:flex-grow-0 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all">
                                <span class="lang-zh">é‡ç½®</span>
                                <span class="lang-en">Reset</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                
                <!-- Decorative elements -->
                <div class="absolute inset-0 bg-gradient-to-br from-pink-100/30 to-purple-100/30 backdrop-blur-sm"></div>
                
                <!-- Decorative border -->
                <div class="absolute inset-0 border-4 border-dashed border-pink-300/50 rounded-2xl pointer-events-none"></div>
                <div class="absolute inset-2 border-2 border-dotted border-purple-300/50 rounded-2xl pointer-events-none"></div>
                
                <!-- Message display area -->
                <div id="message-content" class="text-center py-4 mb-6 min-h-[200px] max-h-[200px] overflow-y-auto flex items-start justify-start relative z-10 backdrop-blur-[2px] bg-white/30 rounded-xl shadow-inner animate-heartbeat">
                    <p class="text-gray-700 text-lg">Loading messages...</p>
                </div>
                
                <!-- Navigation buttons -->
                <div class="flex justify-center space-x-6 relative z-10">
                    <button id="prev-message" class="bg-gradient-to-r from-pink-400 to-purple-500 hover:from-pink-500 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center animate-bounce-subtle">
                        <i class="fas fa-arrow-left mr-2"></i>
                        <span class="lang-zh">ä¸Šä¸€æ¡</span>
                        <span class="lang-en">Previous</span>
                    </button>
                    <button id="next-message" class="bg-gradient-to-r from-purple-400 to-pink-500 hover:from-purple-500 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center animate-bounce-subtle">
                        <span class="lang-zh">ä¸‹ä¸€æ¡</span>
                        <span class="lang-en">Next</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- 5. è‡´è°¢åå•æ¨¡å— (ä»…æ·»åŠ ä¸­è‹±æ–‡ç¿»è¯‘) -->
        <section id="credits" class="section-container py-16">
            <!-- æ ‡é¢˜ -->
            <h2 class="text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-500 mb-12 relative z-10 animate-pulse">
                <span class="lang-zh">è‡´è°¢</span>
                <span class="lang-en">Acknowledgements</span>
            </h2>

            <!-- ä¸»è¦å®¹å™¨ -->
            <div class="max-w-4xl mx-auto rounded-2xl p-6 md:p-10 relative overflow-hidden shadow-2xl" 
                style="background: url('assets/images/mylove.jpg') center/cover no-repeat;">
                
                <!-- æµæ˜Ÿæ•ˆæœ -->
                <div class="shooting-stars-container">
                    <div class="shooting-star"></div>
                    <div class="shooting-star" style="animation-delay: 1s; animation-duration: 4s;"></div>
                    <div class="shooting-star" style="animation-delay: 2s; animation-duration: 3.5s;"></div>
                    <div class="shooting-star" style="animation-delay: 3s; animation-duration: 5s;"></div>
                    <div class="shooting-star" style="animation-delay: 4.5s; animation-duration: 4.2s;"></div>
                </div>
                
                <!-- è£…é¥°æ€§æ¸å˜å’Œæ¨¡ç³Šé®ç½© -->
                <div class="absolute inset-0 bg-gradient-to-br from-pink-100/20 to-purple-100/20 backdrop-blur-sm"></div>
                
                <!-- è£…é¥°æ€§è¾¹æ¡† -->
                <div class="absolute inset-0 border-4 border-dashed border-pink-300/40 rounded-2xl pointer-events-none"></div>
                <div class="absolute inset-2 border-2 border-dotted border-purple-300/40 rounded-2xl pointer-events-none"></div>

                <!-- è‡´è°¢å†…å®¹ç½‘æ ¼å¸ƒå±€ -->
                <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8 text-white text-shadow-md">
                    
                    <!-- ç½‘é¡µç»„ -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">ç½‘é¡µ</span>
                            <span class="lang-en">Website</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">ç½‘é¡µç¼–å†™</span>
                                <span class="lang-en">Development</span>
                            </h4>
                            <p id="credits-web-writing" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">ç½‘é¡µæµ‹è¯•</span>
                                <span class="lang-en">Testing</span>
                            </h4>
                            <p id="credits-web-testing" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- ç”»å¸ˆç»„ -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">ç”»å¸ˆ</span>
                            <span class="lang-en">Artist</span>
                        </h3>
                        <div>
                            <p id="credits-artist" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- èŠ±ç¯®ç»„ -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">èŠ±ç¯®</span>
                            <span class="lang-en">Flower Basket</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">ä¸»å‚¬</span>
                                <span class="lang-en">Organizer</span>
                            </h4>
                            <p id="credits-flower-basket-organizer" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">å‚ä¸</span>
                                <span class="lang-en">Participants</span>
                            </h4>
                            <p id="credits-flower-basket-participants" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- æ— æ–™ç»„ -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">æ— æ–™</span>
                            <span class="lang-en">Free Gifts</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">å¡ç‰‡</span>
                                <span class="lang-en">Cards</span>
                            </h4>
                            <p id="credits-free-gift-cards" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-purple-200">
                                <span class="lang-zh">å¾½ç« </span>
                                <span class="lang-en">Badges</span>
                            </h4>
                            <p id="credits-free-gift-badges" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- ç‰¹åˆ«æ„Ÿè°¢ (æ¨ªè·¨ä¸¤æ ) -->
                    <div class="md:col-span-2 text-center mt-8 pt-6 border-t-2 border-dashed border-white/30">
                        <h3 class="text-2xl font-bold mb-4">
                            <span class="lang-zh">ç‰¹åˆ«æ„Ÿè°¢</span>
                            <span class="lang-en">Special Thanks</span>
                        </h3>
                        <p class="text-lg italic">
                            <span class="lang-zh">æ„Ÿè°¢æ¯ä¸€ä½åŒå¥½ä¼šçš„æˆå‘˜ï¼Œ<br>æ„Ÿè°¢æ¯ä¸€ä½çƒ­çˆ±é‚¦å¤šåˆ©çš„ä½ ï¼</span>
                            <span class="lang-en">Thanks to every member of the club,<br>and to everyone who loves BanG Dream!</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>


        <!-- 6. å¤–éƒ¨é“¾æ¥æ¨¡å— -->
        <section id="links" class="section-container">
            <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">
                <span class="lang-zh">ç¤¾äº¤åª’ä½“</span>
                <span class="lang-en">Social</span>
            </h2>
            <div class="mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- é‚¦é‚¦Bilibili -->
                <a href="https://space.bilibili.com/171818544" target="_blank" class="card-hover flex items-center bg-white p-6 rounded-lg shadow-md space-x-8">
                    <img src="assets/images/bangdream_offical.jpg" 
                         alt="é‚¦å®˜æ–¹" 
                         class="w-24 h-24 object-cover rounded"
                         onerror="this.onerror=null;this.src='https://placehold.co/150x150/e0f2fe/0891b2?text=Image+Not+Found';">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">
                            <span class="lang-zh">å®˜æ–¹Bilibili</span>
                            <span class="lang-en">Official Bilibili</span>
                        </h3>
                        <p class="text-gray-600 mt-1">
                            <span class="lang-zh">ç‚¹å‡»è·³è½¬å®˜æ–¹Bç«™è´¦å·</span>
                            <span class="lang-en">Click to go to<br>the official account</span>
                        </p>
                    </div>
                </a>
                <!-- é“¾æ¥ 2: ç¤¾äº¤åª’ä½“ -->
                <a href="assets/images/SEUbangdreamclub_offical.jpg" target="_blank" class="card-hover flex items-center bg-white p-6 rounded-lg shadow-md space-x-8">
                    <img src="assets/images/SEUbangdream_club.jpg" 
                         alt="ç¤¾äº¤åª’ä½“" 
                         class="w-24 h-24 object-cover rounded"
                         onerror="this.onerror=null;this.src='https://placehold.co/150x150/e0e7ff/4338ca?text=Image+Not+Found';">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">
                            <span class="lang-zh">åŠ å…¥æˆ‘ä»¬</span>
                            <span class="lang-en">Join Us</span>
                        </h3>
                        <p class="text-gray-600 mt-1">
                            <span class="lang-zh">æ¬¢è¿åŠ å…¥<br>ä¸œå—å¤§å­¦é‚¦é‚¦åŒå¥½ä¼š</span>
                            <span class="lang-en">Welcome to<br>SEU Bang Dream Club</span>
                        </p>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <!-- 7. åº•éƒ¨ License -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 <span class="lang-zh">ä¸œå—å¤§å­¦é‚¦é‚¦åŒå¥½ä¼š</span><span class="lang-en">SEU Bang Dream Club</span>. All Rights Reserved.</p>
            <p class="mt-2 text-sm text-gray-400">
                <span class="lang-zh">æœ¬é¡¹ç›®é‡‡ç”¨ <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT è®¸å¯è¯</a> è¿›è¡Œæˆæƒã€‚</span>
                <span class="lang-en">This project is licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT License</a>.</span>
            </p>
        </div>
    </footer>

    <!-- 8. æµ®åŠ¨éŸ³ä¹æ’­æ”¾å™¨ -->
    <!-- MODIFIED: Player is now draggable, shrinkable, and better positioned -->
    <div id="music-player" class="fixed bottom-8 right-5 md:bottom-5 bg-white/80 backdrop-blur-md shadow-xl rounded-full p-3 flex items-center space-x-3 text-gray-700 transition-transform duration-300 ease-in-out scale-50 hover:scale-100 transform-origin-bottom-right cursor-grab">
        <!-- MODIFIED: Added `autoplay` and `muted` for autoplay policy -->
        <audio id="background-audio" loop autoplay>
            <source src="assets/audios/kzn_music.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <button id="play-pause-btn" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors">
            <i id="play-icon" class="fa-solid fa-play text-xl"></i>
            <i id="pause-icon" class="fa-solid fa-pause text-xl hidden"></i>
        </button>
        <button id="mute-unmute-btn" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors">
            <i id="volume-icon" class="fa-solid fa-volume-high text-xl"></i>
            <i id="mute-icon" class="fa-solid fa-volume-xmark text-xl hidden"></i>
        </button>
    </div>

    <!-- NEW: Lightbox / Modal -->
    <!-- MODIFIED: Lightbox is now scrollable on mobile -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 hidden items-start justify-center z-50 p-4 pt-16 overflow-y-auto md:items-center md:pt-4">
        <span id="close-lightbox" class="absolute top-5 right-8 text-white text-5xl font-bold cursor-pointer hover:text-gray-300 transition-colors">&times;</span>
        <div class="text-center">
            <!-- MODIFIED: Corrected image class and adjusted max height -->
            <img id="lightbox-img" class="max-w-[90vw] max-h-[70vh] mx-auto rounded-lg shadow-2xl">
            <div id="download-container" class="mt-6 space-x-4">
                <!-- Download buttons will be injected here by JS -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- è¯­è¨€åˆ‡æ¢é€»è¾‘ ---
            const langSwitchBtn = document.getElementById('lang-switch-btn');
            const htmlEl = document.documentElement;
            let currentLang = 'zh';
            const zhElements = document.querySelectorAll('.lang-zh');
            const enElements = document.querySelectorAll('.lang-en');
            const searchInput = document.getElementById('search-input');
            function setLanguage(lang) {
                htmlEl.lang = lang === 'zh' ? 'zh-CN' : 'en';
                zhElements.forEach(el => el.style.display = lang === 'zh' ? 'inline' : 'none');
                enElements.forEach(el => el.style.display = lang === 'en' ? 'inline' : 'none');
                
                // Update search input placeholder based on language
                if (searchInput) {
                    if (lang === 'en' && searchInput.dataset.enPlaceholder) {
                        searchInput.placeholder = searchInput.dataset.enPlaceholder;
                    } else {
                        searchInput.placeholder = 'æœç´¢ç•™è¨€è€…...';
                    }
                }
                
                currentLang = lang;
            }
            langSwitchBtn.addEventListener('click', () => setLanguage(currentLang === 'zh' ? 'en' : 'zh'));
            setLanguage(currentLang);

            // --- Carousel and Lightbox Logic ---
            const carouselSlides = document.querySelectorAll('.carousel-slide');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const closeLightboxBtn = document.getElementById('close-lightbox');
            const downloadContainer = document.getElementById('download-container');

            // --- é‡è¦: è¯·åœ¨è¿™é‡Œæ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å›¾ç‰‡è·¯å¾„ ---
            const slidesData = [
                {
                    id: 'A',
                    lowRes: 'assets/images/ppp_shanghai.jpg',
                    highRes: 'assets/images/ppp_shanghai.jpg'
                },
                {
                    id: 'B',
                    lowRes: 'assets/images/ppp_10_low.jpg',
                    highRes: 'assets/images/ppp_10_high.jpg'
                }
            ];

            let currentSlide = 0;

            function showSlide(index) {
                carouselSlides.forEach((slide, i) => {
                    slide.classList.toggle('hidden', i !== index);
                });
                currentSlide = index;
            }

            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // é˜²æ­¢ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘ç¯ç®±
                showSlide((currentSlide - 1 + carouselSlides.length) % carouselSlides.length);
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // é˜²æ­¢ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘ç¯ç®±
                showSlide((currentSlide + 1) % carouselSlides.length);
            });

            // ç‚¹å‡»å›¾ç‰‡æ‰“å¼€ç¯ç®±
            carouselSlides.forEach((slide, index) => {
                slide.addEventListener('click', () => {
                    const slideInfo = slidesData[index];
                    lightbox.style.display = 'flex';
                    lightboxImg.src = slideInfo.highRes; // ç¯ç®±é‡Œç›´æ¥æ˜¾ç¤ºé«˜æ¸…å›¾

                    downloadContainer.innerHTML = ''; // æ¸…ç©ºæ—§æŒ‰é’®

                    if (slideInfo.id === 'A') {
                        const btn = `<a href="${slideInfo.highRes}" class="lightbox-btn" download="Event_Image_A.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">ä¸‹è½½å›¾ç‰‡</span><span class="lang-en">Download</span></a>`;
                        downloadContainer.insertAdjacentHTML('beforeend', btn);
                    } else if (slideInfo.id === 'B') {
                        const btnLow = `<a href="${slideInfo.lowRes}" class="lightbox-btn" download="Event_Image_B_Low.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">ä¸‹è½½ä½æ¸…ç‰ˆ</span><span class="lang-en">Download Low-Res</span></a>`;
                        const btnHigh = `<a href="${slideInfo.highRes}" class="lightbox-btn" download="Event_Image_B_High.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">ä¸‹è½½é«˜æ¸…ç‰ˆ</span><span class="lang-en">Download High-Res</span></a>`;
                        downloadContainer.insertAdjacentHTML('beforeend', btnLow);
                        downloadContainer.insertAdjacentHTML('beforeend', btnHigh);
                    }
                    // ç¡®ä¿ä¸‹è½½æŒ‰é’®çš„è¯­è¨€ä¹ŸåŒæ­¥åˆ‡æ¢
                    setLanguage(currentLang);
                });
            });

            // å…³é—­ç¯ç®±
            const closeLightbox = () => lightbox.style.display = 'none';
            closeLightboxBtn.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) closeLightbox();
            });
            
            // åˆå§‹åŒ–è½®æ’­
            showSlide(0);

            // --- Gallery Lightbox Logic ---
            function initializeGalleryLightbox() {
                // è·å–æ‰€æœ‰ç”»å»Šé¡¹ç›®å’Œç¯ç®±å…ƒç´ 
                const galleryItems = document.querySelectorAll('.gallery-item');
                const lightbox = document.getElementById('lightbox'); // å¤ç”¨é¡µé¢ä¸Šå·²æœ‰çš„ç¯ç®±
                const lightboxImg = document.getElementById('lightbox-img');
                const downloadContainer = document.getElementById('download-container');

                // ç¡®ä¿ç¯ç®±å…ƒç´ å­˜åœ¨
                if (!lightbox || !lightboxImg || galleryItems.length === 0) {
                    console.warn('Lightbox or gallery items not found. Gallery preview is disabled.');
                    return;
                }
                
                // ä¸ºæ¯ä¸ªç”»å»Šé¡¹ç›®æ·»åŠ ç‚¹å‡»äº‹ä»¶
                galleryItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const imgElement = item.querySelector('img');
                        if (!imgElement) return;

                        // è·å–é«˜æ¸…å›¾çš„è·¯å¾„ï¼Œå¦‚æœdataå±æ€§ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨srcä½œä¸ºå¤‡ç”¨
                        const highResSrc = imgElement.dataset.lightboxSrc || imgElement.src;
                        
                        // æ›´æ–°ç¯ç®±å›¾ç‰‡æºå¹¶æ˜¾ç¤ºç¯ç®±
                        lightboxImg.src = highResSrc;
                        lightbox.style.display = 'flex'; // æˆ–è€… 'block'ï¼Œå–å†³äºä½ çš„ç¯ç®±æ ·å¼

                        // (å¯é€‰) æ¸…ç©ºæˆ–éšè—ä¸»è§†è§‰å›¾ç¯ç®±é‡Œçš„ä¸‹è½½æŒ‰é’®
                        if (downloadContainer) {
                            downloadContainer.innerHTML = ''; // æ¸…ç©ºä¸‹è½½æŒ‰é’®ï¼Œå› ä¸ºè¿™äº›å›¾æ²¡æœ‰ä¸‹è½½é“¾æ¥
                        }
                    });
                });

                // æ³¨æ„ï¼šå…³é—­ç¯ç®±çš„é€»è¾‘ï¼ˆç‚¹å‡» 'Ã—' æˆ–èƒŒæ™¯ï¼‰åº”è¯¥å·²ç»å­˜åœ¨äºä½ çš„JSä¸­ï¼Œ
                // å› ä¸ºä¸»è§†è§‰å›¾è½®æ’­ä¹Ÿä½¿ç”¨åŒä¸€ä¸ªç¯ç®±ï¼Œæ‰€ä»¥è¿™é‡Œæ— éœ€é‡å¤ç¼–å†™å…³é—­é€»è¾‘ã€‚
            }

            // è°ƒç”¨å‡½æ•°æ¥åˆå§‹åŒ–ç”»å»Šçš„ç¯ç®±åŠŸèƒ½
            initializeGalleryLightbox();

            // --- éŸ³ä¹æ’­æ”¾å™¨é€»è¾‘ ---
            const musicPlayer = document.getElementById('music-player');
            const audio = document.getElementById('background-audio');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const muteUnmuteBtn = document.getElementById('mute-unmute-btn');
            const volumeIcon = document.getElementById('volume-icon');
            const muteIcon = document.getElementById('mute-icon');
            let isAudioInitialized = false;

            // éŸ³ä¹åˆå§‹åŒ–å‡½æ•°ï¼šåœ¨ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶æ’­æ”¾å¹¶å–æ¶ˆé™éŸ³
            const initializeAudio = () => {
                // å¦‚æœå·²ç»åˆå§‹åŒ–è¿‡ï¼ˆæœ‰å£°ä¸”åœ¨æ’­æ”¾ï¼‰ï¼Œå°±ç›´æ¥è¿”å›
                if (audio.muted === false && !audio.paused) return;
                // å°è¯•æ’­æ”¾ï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯é™éŸ³æ’­æ”¾ä¹Ÿå¯èƒ½éœ€è¦ç”¨æˆ·äº¤äº’æ¥å¯åŠ¨ï¼‰
                // å¹¶ä¸”å–æ¶ˆé™éŸ³
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // æ’­æ”¾æˆåŠŸåï¼Œå–æ¶ˆé™éŸ³
                        audio.muted = false;
                        console.log("éŸ³é¢‘å·²åœ¨ç”¨æˆ·äº¤äº’åæˆåŠŸæ’­æ”¾å¹¶å–æ¶ˆé™éŸ³ã€‚");
                        // æ›´æ–°æ‰€æœ‰å›¾æ ‡çŠ¶æ€
                        // updatePlayPauseIcon();
                        // updateMuteIcon();
                        // ã€é‡è¦ã€‘ç§»é™¤æ‰€æœ‰ç”¨äºåˆå§‹åŒ–çš„ç›‘å¬å™¨ï¼Œé¿å…é‡å¤è§¦å‘
                        document.body.removeEventListener('click', initializeAudio);
                        document.body.removeEventListener('touchstart', initializeAudio);
                        if (prevBtn) prevBtn.removeEventListener('click', initializeAudio);
                        if (nextBtn) nextBtn.removeEventListener('click', initializeAudio);
                    }).catch(error => {
                        console.error("åœ¨ç”¨æˆ·äº¤äº’åæ’­æ”¾éŸ³é¢‘å¤±è´¥:", error);
                    });
                }
                // ã€é‡è¦ã€‘ç”¨ { once: true } é€‰é¡¹ï¼Œè¿™ä¸ªç›‘å¬å™¨åœ¨æ‰§è¡Œä¸€æ¬¡åä¼šè‡ªåŠ¨ç§»é™¤ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†
            };

            // ç›‘å¬ç”¨æˆ·é¦–æ¬¡äº¤äº’ä»¥å¯åŠ¨éŸ³é¢‘
            document.body.addEventListener('click', initializeAudio, { once: true });
            document.body.addEventListener('touchstart', initializeAudio, { once: true });
            window.addEventListener('scroll', initializeAudio, { once: true });
            if (prevBtn) prevBtn.addEventListener('click', initializeAudio);
            if (nextBtn) nextBtn.addEventListener('click', initializeAudio);

            // å°è¯•é™éŸ³è‡ªåŠ¨æ’­æ”¾ï¼ˆåœ¨æŸäº›æµè§ˆå™¨ä¸Šå¯ä»¥å·¥ä½œï¼‰
            audio.play().catch(e => console.log("Muted autoplay failed, waiting for interaction."));

            const updatePlayPauseIcon = () => {
                playIcon.classList.toggle('hidden', !audio.paused);
                pauseIcon.classList.toggle('hidden', audio.paused);
            };

            const updateMuteIcon = () => {
                volumeIcon.classList.toggle('hidden', audio.muted);
                muteIcon.classList.toggle('hidden', !audio.muted);
            };

            playPauseBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // é˜²æ­¢äº‹ä»¶å†’æ³¡
                if (audio.paused) {
                    audio.play().catch(e => console.error("Audio play failed", e));
                } else {
                    audio.pause();
                }
            });

            muteUnmuteBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // é˜²æ­¢äº‹ä»¶å†’æ³¡
                audio.muted = !audio.muted;
                updateMuteIcon();
            });
            
            // ç›‘å¬éŸ³é¢‘æœ¬èº«çš„æ’­æ”¾/æš‚åœäº‹ä»¶ï¼Œä»¥åŒæ­¥UI
            audio.addEventListener('play', updatePlayPauseIcon);
            audio.addEventListener('pause', updatePlayPauseIcon);
            audio.addEventListener('volumechange', updateMuteIcon); // å½“mutedå±æ€§æ”¹å˜æ—¶ä¼šè§¦å‘
            
            // åˆå§‹åŒ–å›¾æ ‡çŠ¶æ€
            updatePlayPauseIcon();
            updateMuteIcon();
            
            // --- MODIFIED: å…¨æ–°çš„æ‹–åŠ¨é€»è¾‘ ---
            makeDraggable(musicPlayer);

            function makeDraggable(element) {
                let isDragging = false;
                let startX, startY, initialX, initialY;

                const onDragStart = (e) => {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œåˆ™ä¸è§¦å‘æ‹–åŠ¨
                    if (e.target.closest('button')) {
                        return;
                    }
                    isDragging = true;
                    element.style.cursor = 'grabbing';
                    
                    const touch = e.touches ? e.touches[0] : e;
                    startX = touch.clientX;
                    startY = touch.clientY;
                    initialX = element.offsetLeft;
                    initialY = element.offsetTop;

                    // ç§»é™¤ transform-origin ä»¥ä¾¿å¹³æ»‘æ‹–åŠ¨
                    element.classList.remove('transform-origin-bottom-right');
                    
                    document.addEventListener('mousemove', onDragMove);
                    document.addEventListener('touchmove', onDragMove, { passive: false });
                    document.addEventListener('mouseup', onDragEnd);
                    document.addEventListener('touchend', onDragEnd);
                    
                    // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå¦‚ç§»åŠ¨ç«¯çš„é¡µé¢æ»šåŠ¨
                    if (e.touches) e.preventDefault();
                };

                const onDragMove = (e) => {
                    if (!isDragging) return;
                    if (e.touches) e.preventDefault(); // åœ¨ touchmove ä¸­ä¹Ÿè¦é˜»æ­¢
                    
                    const touch = e.touches ? e.touches[0] : e;
                    const deltaX = touch.clientX - startX;
                    const deltaY = touch.clientY - startY;

                    let newX = initialX + deltaX;
                    let newY = initialY + deltaY;

                    // è¾¹ç•Œæ£€æµ‹
                    const screenWidth = window.innerWidth;
                    const screenHeight = window.innerHeight;
                    const elWidth = element.offsetWidth;
                    const elHeight = element.offsetHeight;

                    if (newX < 0) newX = 0;
                    if (newY < 0) newY = 0;
                    if (newX > screenWidth - elWidth) newX = screenWidth - elWidth;
                    if (newY > screenHeight - elHeight) newY = screenHeight - elHeight;
                    
                    element.style.left = `${newX}px`;
                    element.style.top = `${newY}px`;
                    // æ¸…é™¤åŸæ¥çš„ right å’Œ bottom å®šä½
                    element.style.right = 'auto';
                    element.style.bottom = 'auto';
                };

                const onDragEnd = () => {
                    isDragging = false;
                    element.style.cursor = 'grab';
                    
                    document.removeEventListener('mousemove', onDragMove);
                    document.removeEventListener('touchmove', onDragMove);
                    document.removeEventListener('mouseup', onDragEnd);
                    document.removeEventListener('touchend', onDragEnd);
                };

                element.addEventListener('mousedown', onDragStart);
                element.addEventListener('touchstart', onDragStart, { passive: false });
            }

            // --- Message Board Logic ---
            const messageContent = document.getElementById('message-content');
            const prevMessageBtn = document.getElementById('prev-message');
            const nextMessageBtn = document.getElementById('next-message');
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const resetBtn = document.getElementById('reset-btn');

            // Default messages
            let messages = [
                {
                    words: "æœŸå¾…PPPçš„ç°åœºæ¼”å‡ºï¼å·²ç»å‡†å¤‡å¥½å°–å«äº†ï¼Poppin' Partyçš„éŸ³ä¹æ€»æ˜¯èƒ½å¸¦ç»™æˆ‘æ— é™çš„æ´»åŠ›å’Œå¿«ä¹ï¼Œæ¯æ¬¡å¬åˆ°ä»–ä»¬çš„æ­Œæ›²éƒ½ä¼šè®©æˆ‘å¿ƒæƒ…æ„‰æ‚¦ã€‚è¿™æ¬¡èƒ½å¤Ÿäº²ä¸´ç°åœºè§‚çœ‹æ¼”å‡ºï¼Œæˆ‘æ„Ÿåˆ°éå¸¸å…´å¥‹å’Œæ¿€åŠ¨ï¼Œå·²ç»è¿«ä¸åŠå¾…æƒ³è¦æ„Ÿå—ç°åœºçš„çƒ­çƒˆæ°›å›´äº†ï¼",
                    author: "ç²‰ä¸å°æ˜"
                },
                {
                    words: "PPPçš„ç°åœºå¤ªç²¾å½©äº†ï¼",
                    author: "ç²‰ä¸å°ç‹"
                }
            ];

            // Store filtered messages
            let filteredMessages = [];
            let currentMessageIndex = 0;

            // Try to load messages from message_board.json
            function loadMessages() {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', 'assets/data/message_board.json', true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            try {
                                const data = JSON.parse(xhr.responseText);
                                if (data && data.length > 0) {
                                    messages = data;
                                }
                            } catch (e) {
                                console.error('Error parsing message_board.json:', e);
                            }
                        } else {
                            console.error('Error loading message_board.json: Status', xhr.status);
                        }
                        // Initialize message board with either loaded or default messages
                        filteredMessages = [...messages];
                        displayMessage(currentMessageIndex);
                    }
                };
                xhr.onerror = function() {
                    console.error('Error loading message_board.json');
                    // Initialize message board with default messages
                    filteredMessages = [...messages];
                    displayMessage(currentMessageIndex);
                };
                try {
                    xhr.send();
                } catch (error) {
                    console.error('Error sending request for message_board.json:', error);
                    // Initialize message board with default messages
                    filteredMessages = [...messages];
                    displayMessage(currentMessageIndex);
                }
            }

            function displayMessage(index) {
                const message = filteredMessages[index];
                messageContent.innerHTML = `
                    <div class="text-center px-4 pt-2">
                        <p class="text-gray-700 text-lg mb-2 italic">"${message.words}"</p>
                        <p class="text-gray-500 text-sm">- ${message.author}</p>
                    </div>
                `;
            }

            // Search functionality
            function searchMessages() {
                const searchTerm = searchInput.value.trim().toLowerCase();
                if (searchTerm === '') {
                    filteredMessages = [...messages];
                } else {
                    filteredMessages = messages.filter(message => 
                        message.author.toLowerCase().includes(searchTerm)
                    );
                }
                currentMessageIndex = 0;
                if (filteredMessages.length > 0) {
                    displayMessage(currentMessageIndex);
                } else {
                    messageContent.innerHTML = `
                        <div class="text-center">
                            <p class="text-gray-700 text-lg">æœªæ‰¾åˆ°åŒ¹é…çš„ç•™è¨€</p>
                        </div>
                    `;
                }
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            }

            // Reset functionality
            function resetMessages() {
                searchInput.value = '';
                filteredMessages = [...messages];
                currentMessageIndex = 0;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            }

            prevMessageBtn.addEventListener('click', () => {
                currentMessageIndex = (currentMessageIndex - 1 + filteredMessages.length) % filteredMessages.length;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            });

            nextMessageBtn.addEventListener('click', () => {
                currentMessageIndex = (currentMessageIndex + 1) % filteredMessages.length;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            });

            // Add search event listeners
            searchBtn.addEventListener('click', searchMessages);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    searchMessages();
                }
            });
            resetBtn.addEventListener('click', resetMessages);

            // Load messages and initialize message board
            loadMessages();

            // --- Credits List Logic (æ”¯æŒé‚®ä»¶é“¾æ¥) ---
            function loadCredits() {
                fetch('assets/data/credits.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(creditsData => {
                        // Helper function to render a list of names, some with links
                        const renderCreditList = (elementId, peopleArray) => {
                            const container = document.getElementById(elementId);
                            if (!container || !Array.isArray(peopleArray)) {
                                if(container) container.textContent = "Data Error";
                                return;
                            }

                            // Clear "Loading..." text
                            container.innerHTML = '';

                            // Build the list with links and text
                            peopleArray.forEach((person, index) => {
                                // 1. Create the element for the person
                                let personElement;
                                if (person.email) {
                                    // If email exists, create an anchor tag
                                    personElement = document.createElement('a');
                                    personElement.href = `mailto:${person.email}`;
                                    personElement.className = 'credit-link';
                                    personElement.textContent = person.name;
                                } else {
                                    // Otherwise, create a simple text node
                                    personElement = document.createTextNode(person.name);
                                }
                                container.appendChild(personElement);

                                // 2. Add a separator, but not for the last person
                                if (index < peopleArray.length - 1) {
                                    const separator = document.createTextNode(', ');
                                    container.appendChild(separator);
                                }
                            });
                        };

                        // Populate each list using the new render function
                        renderCreditList('credits-web-writing', creditsData.web.writing);
                        renderCreditList('credits-web-testing', creditsData.web.testing);
                        renderCreditList('credits-artist', creditsData.artist);
                        renderCreditList('credits-flower-basket-organizer', creditsData.flower_basket.organizer);
                        renderCreditList('credits-flower-basket-participants', creditsData.flower_basket.participants);
                        renderCreditList('credits-free-gift-cards', creditsData.free_gift.cards);
                        renderCreditList('credits-free-gift-badges', creditsData.free_gift.badges);
                    })
                    .catch(error => {
                        console.error('æ— æ³•åŠ è½½è‡´è°¢åå• (credits.json):', error);
                        const allCreditElements = document.querySelectorAll('[id^="credits-"]');
                        allCreditElements.forEach(el => {
                            el.textContent = 'åŠ è½½å¤±è´¥';
                        });
                    });
            }

            // è°ƒç”¨å‡½æ•° (è¿™è¡Œä»£ç åº”è¯¥å·²ç»åœ¨ä½ çš„è„šæœ¬é‡Œäº†)
            loadCredits();

        });
    </script>
</body>
</html>
