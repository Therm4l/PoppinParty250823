<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEU BanG Dream Club for PPP Live in Shanghai, 2025</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light gray background */
        }
        h1, h2 {
            font-weight: 700;
        }
        .section-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #3b82f6; /* Blue-500 */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        /* 为致谢名单中的可点击链接添加样式 */
        .credit-link {
            @apply text-purple-300 underline decoration-dotted underline-offset-4 transition-colors duration-300;
        }

        .credit-link:hover {
            @apply text-pink-300 decoration-solid;
        }
        /* Hide elements by default for language switching */
        .lang-en {
            display: none;
        }
        /* Carousel and Lightbox Styles */
        .carousel-slide {
            transition: opacity 0.5s ease-in-out;
        }
        .lightbox-btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #3b82f6;
            color: white;
            font-weight: 600;
            text-decoration: none;
            border-radius: 0.5rem;
            transition: background-color 0.3s;
        }
        .lightbox-btn:hover {
            background-color: #2563eb;
        }
        /* MODIFIED: Helper class to hide scrollbar for mobile nav */
        .mobile-nav-scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav-scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* --- MODIFIED: z-index fix for carousel buttons --- */
        /* 确保轮播按钮的层级高于音乐播放器，以解决移动端点击问题 */
        #prev-btn, #next-btn {
            z-index: 30;
        }
        
        /* --- MODIFIED: z-index for music player --- */
        /* 为音乐播放器设置一个明确的、较低的z-index */
        #music-player {
            z-index: 20; 
            user-select: none; /* 防止拖动时选中文本 */
        }
        #music-player button, #music-player i {
            pointer-events: auto; /* 确保播放器内部的按钮可以被点击 */
        }
        #music-player i {
             pointer-events: none; /* 让事件穿透到父级按钮 */
        }
        
        /* Message Board Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes sparkle {
            0% { transform: scale(1) rotate(0deg); opacity: 0.7; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 0.7; }
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        @keyframes bounce-subtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .animate-heartbeat {
            animation: heartbeat 2s infinite ease-in-out;
        }
        
        .animate-bounce-subtle {
            animation: bounce-subtle 2s infinite ease-in-out;
        }
        
        
        /* Shooting stars */
        .shooting-stars-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 20;
        }
        
        .shooting-star {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: shooting 3s linear infinite;
            opacity: 0;
        }
        
        .shooting-star-1 {
            top: 10%;
            left: -10px;
            animation-delay: 0s;
        }
        
        .shooting-star-2 {
            top: 25%;
            left: -10px;
            animation-delay: 0.5s;
        }
        
        .shooting-star-3 {
            top: 40%;
            left: -10px;
            animation-delay: 1s;
        }
        
        .shooting-star-4 {
            top: 55%;
            left: -10px;
            animation-delay: 1.5s;
        }
        
        .shooting-star-5 {
            top: 70%;
            left: -10px;
            animation-delay: 2s;
        }
        
        .shooting-star-6 {
            top: 85%;
            left: -10px;
            animation-delay: 2.5s;
        }
        
        @keyframes shooting {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateX(500px) translateY(500px);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 1. 顶部固定导航栏 -->
    <!-- [MODIFIED] START: 完整的、已修改的 Header 部分，可直接替换 -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 relative">
                <!-- 左侧标题 (保持不变) -->
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-gray-900">
                        <span class="lang-zh">东南大学邦邦同好会</span>
                        <span class="lang-en">SEU BanG Dream Club</span>
                    </h1>
                </div>

                <!-- 右侧导航容器 -->
                <div>
                    <!-- 桌面端导航 (中等屏幕以上显示) -->
                    <div class="hidden md:flex items-center space-x-2">
                        <a href="#info" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">活动简介</span>
                            <span class="lang-en">Info</span>
                        </a>
                        <a href="#gallery" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">创作</span>
                            <span class="lang-en">Crafts</span>
                        </a>
                        <a href="#message-board" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">留言板</span>
                            <span class="lang-en">Message Board</span>
                        </a>
                        <a href="#credits" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">致谢</span>
                            <span class="lang-en">Acknowledgements</span>
                        </a>
                        <a href="#links" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">社交媒体</span>
                            <span class="lang-en">Social</span>
                        </a>
                        <a href="player.html" class="nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                            <span class="lang-zh">歌单(test)</span>
                            <span class="lang-en">Playlist</span>
                        </a>
                        <button id="lang-switch-btn-desktop" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-3 py-1 rounded-full text-xs transition-colors">
                            <span class="lang-zh">EN</span>
                            <span class="lang-en">中文</span>
                        </button>
                    </div>

                    <!-- 移动端菜单按钮 (仅在中等屏幕以下显示) -->
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="text-gray-600 hover:text-gray-900 p-2 rounded-md">
                            <i class="fa-solid fa-ellipsis-vertical text-xl"></i>
                        </button>
                    </div>
                </div>

                <!-- 移动端下拉菜单 (默认隐藏，通过 JS 控制) -->
                <div id="mobile-menu" class="hidden md:hidden absolute top-full right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 p-2 space-y-1">
                    <a href="#info" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">活动简介</span>
                        <span class="lang-en">Info</span>
                    </a>
                    <a href="#gallery" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">创作</span>
                        <span class="lang-en">Crafts</span>
                    </a>
                    <a href="#message-board" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">留言板</span>
                        <span class="lang-en">Message Board</span>
                    </a>
                    <a href="#credits" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">致谢</span>
                        <span class="lang-en">Acknowledgements</span>
                    </a>
                    <a href="#links" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">社交媒体</span>
                        <span class="lang-en">Social</span>
                    </a>
                    <a href="player.html" class="block nav-link text-gray-600 font-medium px-3 py-2 rounded-md text-sm">
                        <span class="lang-zh">歌单（Waiting）</span>
                        <span class="lang-en">Playlist(Waiting)</span>
                    </a>
                    <button id="lang-switch-btn-mobile" class="w-full text-left bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-3 py-2 rounded-md text-sm transition-colors">
                        <span class="lang-zh">EN</span>
                        <span class="lang-en">中文</span>
                    </button>
                </div>
            </div>
        </nav>
    </header>
    <!-- [MODIFIED] END: Header 部分结束 -->

    <main>
        <!-- 2. 信息模块 (活动介绍) -->
        <section id="info" class="section-container text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-500 mb-12 relative z-10 animate-pulse">
            <!-- <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"> -->
                <span class="lang-zh">Poppin' Party Global LIVE 2025<br>「Shiny High-Five!!」</span>
                <span class="lang-en">Poppin' Party Global LIVE 2025<br>"Shiny High-Five!!"</span>
            </h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-6">
                <span class="lang-zh">BanG Dream! 上海公演2025<br>
                    Poppin' Party Global LIVE 2025「Shiny High-Five!!」将于8月23日开幕！<br>
                    那些让你眼眶发热的瞬间，那些改变你人生的音符，将点亮这片夜空！</span>
                <span class="lang-en">BanG Dream! Shanghai Performance 2025<br>
                    Poppin' Party Global LIVE 2025 "Shiny High-Five!!" opens on August 23rd!<br>
                    Moments that will make your eyes melt, and notes that will change your life, will light up the night sky!</span>
            </p>
            <div class="flex justify-center space-x-4 mb-8">
                <a href="https://www.google.com/maps/place/Shanghai+Oriental+Sports+Center/@31.1553068,121.4776243,17z/data=!4m14!1m7!3m6!1s0x35b27b16a397911f:0x38fff885e6c9d84f!2sShanghai+Oriental+Sports+Center!8m2!3d31.155555!4d121.47303!16s%2Fm%2F06_v4mf!3m5!1s0x35b27b0f97160303:0xb55cbf032d2fbed1!8m2!3d31.155315!4d121.477966!16s%2Fg%2F11gzxpxwb?entry=ttu&g_ep=EgoyMDI1MDczMC4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="bg-gray-800 text-white font-semibold px-6 py-2 rounded-lg shadow-md hover:bg-gray-900 transition-colors">
                    <span class="lang-zh">查看地图</span>
                    <span class="lang-en">View Map</span>
                </a>
            </div>
            <!-- NEW: Image Carousel -->
            <div id="image-carousel" class="relative w-full max-w-4xl mx-auto rounded-lg shadow-lg overflow-hidden group cursor-pointer">
                <!-- Slide 1 -->
                <div class="carousel-slide">
                    <img src="assets/images/ppp_shanghai.jpg" alt="活动主视觉 A" class="w-full h-full object-cover">
                </div>
                <!-- Slide 2 -->
                <div class="carousel-slide hidden">
                    <img src="assets/images/ppp_10_preview.jpg" alt="活动主视觉 B" class="w-full h-full object-cover">
                </div>

                <!-- === MODIFIED: 全新样式的翻页按钮 === -->
                <button id="prev-btn" 
                        class="absolute top-1/2 left-4 transform -translate-y-1/2 
                            w-12 h-12 rounded-full flex items-center justify-center
                            bg-gradient-to-r from-pink-500 to-purple-500 text-white 
                            shadow-lg opacity-80 hover:opacity-100 
                            transition-all duration-300 ease-in-out 
                            hover:scale-110 hover:shadow-xl z-30">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button id="next-btn" 
                        class="absolute top-1/2 right-4 transform -translate-y-1/2 
                            w-12 h-12 rounded-full flex items-center justify-center 
                            bg-gradient-to-l from-pink-500 to-purple-500 text-white 
                            shadow-lg opacity-80 hover:opacity-100 
                            transition-all duration-300 ease-in-out 
                            hover:scale-110 hover:shadow-xl z-30">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
                <!-- === 修改结束 === -->
                
            </div>
        </section>


        <!-- 3. 花篮与无料 - 优化版 -->
        <section id="gallery" class="section-container py-16">

            <!-- 主标题 (应用了渐变和脉冲效果) -->
            <h2 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-8 relative z-10 animate-pulse">
                <span class="lang-zh">创作</span>
                <span class="lang-en">Crafts</span>
            </h2>

            <!-- 主要容器 (添加了边框和 relative 定位) -->
            <div class="max-w-5xl mx-auto rounded-2xl p-6 md:p-10 relative">

                <!-- 装饰性边框 -->
                <div class="absolute inset-0 border-4 border-dashed border-pink-300/50 rounded-2xl pointer-events-none"></div>
                <div class="absolute inset-2 border-2 border-dotted border-purple-300/50 rounded-2xl pointer-events-none"></div>
                
                <!-- === 分组 1: 花篮 === -->
                <div class="mb-16">
                    <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 border-pink-400/50 pb-2">
                        <span class="lang-zh">花篮</span>
                        <span class="lang-en">Flower Basket</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- 图 1.1 -->
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/main_visual.png" 
                                data-lightbox-src="assets/images/main_visual.png"
                                alt="花篮主视觉图" 
                                class="w-full rounded-md mb-4 aspect-square object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/600x400/dbeafe/3b82f6?text=花篮主视觉图';">
                            <p class="text-gray-700 text-center font-medium">
                                <span class="lang-zh">主视觉图</span>
                                <span class="lang-en">Main Visual</span>
                            </p>
                        </div>
                        <!-- 图 1.2 -->
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/flower_basket.jpg" 
                                data-lightbox-src="assets/images/flower_basket.jpg"
                                alt="花篮设计图" 
                                class="w-full rounded-md mb-4 aspect-square object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/600x400/dbeafe/3b82f6?text=花篮设计图';">
                            <p class="text-gray-700 text-center font-medium">
                                <span class="lang-zh">设计图</span>
                                <span class="lang-en">Design</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- === 分组 2: 无料A (卡片) === -->
                <div class="mb-16">
                    <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 border-pink-400/50 pb-2">
                        <span class="lang-zh">无料 A (卡片)</span>
                        <span class="lang-en">Free Gift A (Cards)</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- 图 2.1 -->
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/card_front.jpg" 
                                data-lightbox-src="assets/images/card_front_large.jpg"
                                alt="卡片正面" 
                                class="w-full rounded-md mb-4 aspect-video object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/600x400/fecaca/991b1b?text=卡片正面';">
                            <p class="text-gray-700 text-center font-medium">
                                <span class="lang-zh">卡片正面</span>
                                <span class="lang-en">Card Front</span>
                            </p>
                        </div>
                        <!-- 图 2.2 -->
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/card_back.jpg" 
                                data-lightbox-src="assets/images/card_back_large.jpg"
                                alt="卡片背面" 
                                class="w-full rounded-md mb-4 aspect-video object-cover"
                                onerror="this.onerror=null;this.src='https://placehold.co/600x400/fecaca/991b1b?text=卡片背面';">
                            <p class="text-gray-700 text-center font-medium">
                                <span class="lang-zh">卡片背面</span>
                                <span class="lang-en">Card Back</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- === 分组 3: 无料B (徽章) === -->
                <div>
                    <h3 class="text-2xl font-semibold text-center text-gray-800 mb-8 border-b-2 border-pink-400/50 pb-2">
                        <span class="lang-zh">无料 B (徽章)</span>
                        <span class="lang-en">Free Gift B (Badges)</span>
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                        <!-- 图 3.1 - 3.6 -->
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/ksm.jpg" data-lightbox-src="assets/images/ksm.jpg" alt="徽章 1" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+1';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">户山香澄</span><span class="lang-en">Toyama Kasumi</span></p>
                        </div>
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/tae.jpg" data-lightbox-src="assets/images/tae.jpg" alt="徽章 2" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+2';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">花园多惠</span><span class="lang-en">Hanazono Tae</span></p>
                        </div>
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/rimi.jpg" data-lightbox-src="assets/images/rimi.jpg" alt="徽章 3" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+3';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">牛込里美</span><span class="lang-en">Ushigome Rimi</span></p>
                        </div>
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/saaya.jpg" data-lightbox-src="assets/images/saaya.jpg" alt="徽章 4" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+4';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">山吹沙绫</span><span class="lang-en">Yamabuki Sāya</span></p>
                        </div>
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/ars.jpg" data-lightbox-src="assets/images/ars.jpg" alt="徽章 5" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+5';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">市谷有咲</span><span class="lang-en">Ichigaya Arisa</span></p>
                        </div>
                        <div class="gallery-item card-hover bg-white p-4 rounded-lg shadow-lg cursor-pointer transition-transform duration-300">
                            <img src="assets/images/POPIPA.jpg" data-lightbox-src="assets/images/POPIPA.jpg" alt="徽章 6" class="w-full rounded-md mb-4 aspect-square object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/cffafe/155e75?text=徽章+6';">
                            <p class="text-gray-700 text-center font-medium"><span class="lang-zh">Popipa</span><span class="lang-en">Popipa</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- 4. 留言板模块 -->
        <section id="message-board" class="section-container">
            <h2 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-8 relative z-10 animate-pulse">
                <span class="lang-zh">留言板</span>
                <span class="lang-en">Message Board</span>
            </h2>
            <div class="max-w-4xl mx-auto rounded-2xl p-8 relative overflow-hidden shadow-2xl" 
                 style="background: url('assets/images/mylove.jpg') center/cover no-repeat; 
                        backdrop-filter: blur(1px);">
                <!-- Shooting stars -->
                <div class="shooting-stars-container">
                    <div class="shooting-star shooting-star-1"></div>
                    <div class="shooting-star shooting-star-2"></div>
                    <div class="shooting-star shooting-star-3"></div>
                    <div class="shooting-star shooting-star-4"></div>
                    <div class="shooting-star shooting-star-5"></div>
                    <div class="shooting-star shooting-star-6"></div>
                </div>
                
                <!-- Search Module -->
                <div class="mb-6 relative z-10 backdrop-blur-[2px] bg-white/30 rounded-xl shadow-inner p-4">
                    <div class="flex flex-col sm:flex-row">
                        <input type="text" id="search-input" placeholder="搜索留言者..." data-en-placeholder="Search by author..."
                               class="flex-grow px-4 py-2 rounded-lg border-0 focus:ring-2 focus:ring-pink-500 focus:outline-none mb-2 sm:mb-0 min-w-0 sm:mr-2">
                        <div class="flex">
                            <button id="search-btn" class="flex-grow sm:flex-grow-0 bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded-lg sm:rounded-r-lg hover:from-pink-600 hover:to-purple-600 transition-all whitespace-nowrap">
                                <span class="lang-zh">搜索</span>
                                <span class="lang-en">Search</span>
                            </button>
                            <button id="reset-btn" class="ml-2 flex-grow sm:flex-grow-0 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-4 py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all whitespace-nowrap">
                                <span class="lang-zh">重置</span>
                                <span class="lang-en">Reset</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                
                <!-- Decorative elements -->
                <div class="absolute inset-0 bg-gradient-to-br from-pink-100/30 to-purple-100/30 backdrop-blur-sm"></div>
                
                <!-- Decorative border -->
                <div class="absolute inset-0 border-4 border-dashed border-pink-300/50 rounded-2xl pointer-events-none"></div>
                <div class="absolute inset-2 border-2 border-dotted border-purple-300/50 rounded-2xl pointer-events-none"></div>
                
                <!-- Message display area -->
                <div id="message-content" class="text-center py-4 mb-6 min-h-[200px] max-h-[200px] overflow-y-auto flex items-start justify-center relative z-10 backdrop-blur-[2px] bg-white/30 rounded-xl shadow-inner animate-heartbeat">
                    <div class="w-full flex items-center justify-center">
                        <p class="text-gray-700 text-lg">Loading messages...</p>
                    </div>
                </div>
                
                <!-- Navigation buttons -->
                <div class="flex justify-center space-x-6 relative z-10">
                    <button id="prev-message" class="bg-gradient-to-r from-pink-400 to-purple-500 hover:from-pink-500 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center animate-bounce-subtle">
                        <i class="fas fa-arrow-left mr-2"></i>
                        <span class="lang-zh">上一条</span>
                        <span class="lang-en">Previous</span>
                    </button>
                    <button id="next-message" class="bg-gradient-to-r from-purple-400 to-pink-500 hover:from-purple-500 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center animate-bounce-subtle">
                        <span class="lang-zh">下一条</span>
                        <span class="lang-en">Next</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- 5. 致谢名单模块 (仅添加中英文翻译) -->
        <section id="credits" class="section-container py-16">
            <!-- 标题 -->
            <h2 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-500 mb-12 relative z-10 animate-pulse">
                <span class="lang-zh">致谢</span>
                <span class="lang-en">Acknowledgements</span>
            </h2>

            <!-- 主要容器 -->
            <div class="max-w-4xl mx-auto rounded-2xl p-6 md:p-10 relative overflow-hidden shadow-2xl" 
                style="background: url('assets/images/mylove.jpg') center/cover no-repeat;">
                
                <!-- 流星效果 -->
                <div class="shooting-stars-container">
                    <div class="shooting-star"></div>
                    <div class="shooting-star" style="animation-delay: 1s; animation-duration: 4s;"></div>
                    <div class="shooting-star" style="animation-delay: 2s; animation-duration: 3.5s;"></div>
                    <div class="shooting-star" style="animation-delay: 3s; animation-duration: 5s;"></div>
                    <div class="shooting-star" style="animation-delay: 4.5s; animation-duration: 4.2s;"></div>
                </div>
                
                <!-- 装饰性渐变和模糊遮罩 -->
                <div class="absolute inset-0 bg-gradient-to-br from-pink-100/20 to-purple-100/20 backdrop-blur-sm"></div>
                
                <!-- 装饰性边框 -->
                <div class="absolute inset-0 border-4 border-dashed border-pink-300/40 rounded-2xl pointer-events-none"></div>
                <div class="absolute inset-2 border-2 border-dotted border-purple-300/40 rounded-2xl pointer-events-none"></div>

                <!-- 致谢内容网格布局 -->
                <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8 text-gray-800 text-shadow-md">
                    
                    <!-- 网页组 -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">网页</span>
                            <span class="lang-en">Website</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">网页编写</span>
                                <span class="lang-en">Development</span>
                            </h4>
                            <p id="credits-web-writing" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">网页测试</span>
                                <span class="lang-en">Testing</span>
                            </h4>
                            <p id="credits-web-testing" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- 画师组 -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">画师</span>
                            <span class="lang-en">Artist</span>
                        </h3>
                        <div>
                            <p id="credits-artist" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- 花篮组 -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">花篮</span>
                            <span class="lang-en">Flower Basket</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">主催</span>
                                <span class="lang-en">Organizer</span>
                            </h4>
                            <p id="credits-flower-basket-organizer" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">参与</span>
                                <span class="lang-en">Participants</span>
                            </h4>
                            <p id="credits-flower-basket-participants" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- 无料组 -->
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold border-b-2 border-pink-400/50 pb-2">
                            <span class="lang-zh">无料</span>
                            <span class="lang-en">Free Gifts</span>
                        </h3>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">卡片</span>
                                <span class="lang-en">Cards</span>
                            </h4>
                            <p id="credits-free-gift-cards" class="pl-4">Loading...</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-[#FF3377]">
                                <span class="lang-zh">徽章</span>
                                <span class="lang-en">Badges</span>
                            </h4>
                            <p id="credits-free-gift-badges" class="pl-4">Loading...</p>
                        </div>
                    </div>

                    <!-- 特别感谢 (横跨两栏) -->
                    <div class="md:col-span-2 text-center mt-8 pt-6 border-t-2 border-dashed border-white/30">
                        <h3 class="text-2xl font-bold mb-4">
                            <span class="lang-zh">特别鸣谢</span>
                            <span class="lang-en">Special Thanks</span>
                        </h3>
                        <p class="text-lg italic">
                            <span class="lang-zh">感谢每一位同好会的成员，<br>感谢每一位热爱邦多利的你！</span>
                            <span class="lang-en">Thanks to every member of the club,<br>and to everyone who loves BanG Dream!</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>


        <!-- 6. 外部链接模块 -->
        <section id="links" class="section-container">
            <!-- <h2 class="text-3xl font-bold text-center text-gray-900 mb-12"> -->
            <h2 class="text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-8 relative z-10 animate-pulse">
                <span class="lang-zh">社交媒体</span>
                <span class="lang-en">Social</span>
            </h2>
            <div class="mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- 邦邦Bilibili -->
                <a href="https://space.bilibili.com/171818544" target="_blank" class="card-hover flex items-center bg-white p-6 rounded-lg shadow-md space-x-8">
                    <img src="assets/images/bangdream_offical.jpg" 
                         alt="邦官方" 
                         class="w-24 h-24 object-cover rounded"
                         onerror="this.onerror=null;this.src='https://placehold.co/150x150/e0f2fe/0891b2?text=Image+Not+Found';">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">
                            <span class="lang-zh">官方Bilibili</span>
                            <span class="lang-en">Official Bilibili</span>
                        </h3>
                        <p class="text-gray-600 mt-1">
                            <span class="lang-zh">点击跳转官方B站账号</span>
                            <span class="lang-en">Click to go to<br>the official account</span>
                        </p>
                    </div>
                </a>
                <!-- 链接 2: 社交媒体 -->
                <a href="assets/images/SEUbangdreamclub_offical.jpg" target="_blank" class="card-hover flex items-center bg-white p-6 rounded-lg shadow-md space-x-8">
                    <img src="assets/images/SEUbangdream_club.jpg" 
                         alt="社交媒体" 
                         class="w-24 h-24 object-cover rounded"
                         onerror="this.onerror=null;this.src='https://placehold.co/150x150/e0e7ff/4338ca?text=Image+Not+Found';">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">
                            <span class="lang-zh">加入我们</span>
                            <span class="lang-en">Join Us</span>
                        </h3>
                        <p class="text-gray-600 mt-1">
                            <span class="lang-zh">欢迎加入<br>东南大学邦邦同好会</span>
                            <span class="lang-en">Welcome to<br>SEU BanG Dream Club</span>
                        </p>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <!-- 7. 底部 License -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 <span class="lang-zh">东南大学邦邦同好会</span><span class="lang-en">SEU Bang Dream Club</span>. All Rights Reserved.</p>
            <p class="mt-2 text-sm text-gray-400">
                <span class="lang-zh">本项目采用 <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT 许可证</a> 进行授权。</span>
                <span class="lang-en">This project is licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank" class="underline hover:text-white">MIT License</a>.</span>
            </p>
        </div>
    </footer>

    <!-- 8. 浮动音乐播放器 -->
    <!-- MODIFIED: Player is now draggable, shrinkable, and better positioned -->
    <div id="music-player" class="fixed bottom-8 right-5 md:bottom-5 bg-white/80 backdrop-blur-md shadow-xl rounded-full p-3 flex items-center space-x-3 text-gray-700 transition-transform duration-300 ease-in-out scale-50 hover:scale-100 transform-origin-bottom-right cursor-grab">
        <!-- MODIFIED: Added `autoplay` and `muted` for autoplay policy -->
        <audio id="background-audio" loop autoplay>
            <source src="assets/audios/kzn_music.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <button id="play-pause-btn" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors">
            <i id="play-icon" class="fa-solid fa-play text-xl"></i>
            <i id="pause-icon" class="fa-solid fa-pause text-xl hidden"></i>
        </button>
        <button id="mute-unmute-btn" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors">
            <i id="volume-icon" class="fa-solid fa-volume-high text-xl"></i>
            <i id="mute-icon" class="fa-solid fa-volume-xmark text-xl hidden"></i>
        </button>
    </div>

    <!-- NEW: Lightbox / Modal -->
    <!-- MODIFIED: Lightbox is now scrollable on mobile -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 hidden items-start justify-center z-50 p-4 pt-16 overflow-y-auto md:items-center md:pt-4">
        <span id="close-lightbox" class="absolute top-5 right-8 text-white text-5xl font-bold cursor-pointer hover:text-gray-300 transition-colors">&times;</span>
        <div class="text-center">
            <!-- MODIFIED: Corrected image class and adjusted max height -->
            <img id="lightbox-img" class="max-w-[90vw] max-h-[70vh] mx-auto rounded-lg shadow-2xl">
            <div id="download-container" class="mt-6 space-x-4">
                <!-- Download buttons will be injected here by JS -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- 语言切换逻辑 ---
            const langSwitchBtn = document.getElementById('lang-switch-btn');
            // [替换] 原有的语言切换逻辑替换为这个新函数
            const htmlEl = document.documentElement;
            let currentLang = 'zh';
            const zhElements = document.querySelectorAll('.lang-zh');
            const enElements = document.querySelectorAll('.lang-en');
            const searchInput = document.getElementById('search-input');
            // --- 移动端导航栏和语言切换逻辑 ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const langSwitchBtnDesktop = document.getElementById('lang-switch-btn-desktop');
            const langSwitchBtnMobile = document.getElementById('lang-switch-btn-mobile');
            function setLanguage(lang) {
                htmlEl.lang = lang === 'zh' ? 'zh-CN' : 'en';
                // 注意：这里使用 'inline-block' 确保布局正确
                zhElements.forEach(el => el.style.display = lang === 'zh' ? 'inline-block' : 'none');
                enElements.forEach(el => el.style.display = lang === 'en' ? 'inline-block' : 'none');
                
                if (searchInput) {
                    searchInput.placeholder = lang === 'en' ? searchInput.dataset.enPlaceholder : '搜索留言者...';
                }
                currentLang = lang;
            }

            function toggleLanguage() {
                setLanguage(currentLang === 'zh' ? 'en' : 'zh');
            }

            // [新增] 移动端菜单的点击事件
            mobileMenuButton.addEventListener('click', (event) => {
                event.stopPropagation(); // 防止点击事件冒泡到window
                mobileMenu.classList.toggle('hidden');
            });

            // [新增] 为两个语言切换按钮绑定事件
            langSwitchBtnDesktop.addEventListener('click', toggleLanguage);
            langSwitchBtnMobile.addEventListener('click', toggleLanguage);

            // [新增] (可选但推荐) 点击页面其他地方可以关闭菜单
            window.addEventListener('click', (event) => {
                if (!mobileMenu.classList.contains('hidden') && !mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target)) {
                    mobileMenu.classList.add('hidden');
                }
            });

            // [新增] (可选但推荐) 点击菜单中的链接后自动关闭菜单
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // [保留] 并确保调用一次，初始化页面语言
            setLanguage(currentLang);

            // --- Carousel and Lightbox Logic ---
            const carouselSlides = document.querySelectorAll('.carousel-slide');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const closeLightboxBtn = document.getElementById('close-lightbox');
            const downloadContainer = document.getElementById('download-container');

            // --- 重要: 请在这里替换为您自己的图片路径 ---
            const slidesData = [
                {
                    id: 'A',
                    lowRes: 'assets/images/ppp_shanghai.jpg',
                    highRes: 'assets/images/ppp_shanghai.jpg'
                },
                {
                    id: 'B',
                    lowRes: 'assets/images/ppp_10_low.jpg',
                    highRes: 'assets/images/ppp_10_high.jpg'
                }
            ];

            let currentSlide = 0;

            function showSlide(index) {
                carouselSlides.forEach((slide, i) => {
                    slide.classList.toggle('hidden', i !== index);
                });
                currentSlide = index;
            }

            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // 防止点击按钮时触发灯箱
                showSlide((currentSlide - 1 + carouselSlides.length) % carouselSlides.length);
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // 防止点击按钮时触发灯箱
                showSlide((currentSlide + 1) % carouselSlides.length);
            });

            // 点击图片打开灯箱
            carouselSlides.forEach((slide, index) => {
                slide.addEventListener('click', () => {
                    const slideInfo = slidesData[index];
                    lightbox.style.display = 'flex';
                    lightboxImg.src = slideInfo.highRes; // 灯箱里直接显示高清图

                    downloadContainer.innerHTML = ''; // 清空旧按钮

                    if (slideInfo.id === 'A') {
                        const btn = `<a href="${slideInfo.highRes}" class="lightbox-btn" download="Event_Image_A.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">下载图片</span><span class="lang-en">Download</span></a>`;
                        downloadContainer.insertAdjacentHTML('beforeend', btn);
                    } else if (slideInfo.id === 'B') {
                        const btnLow = `<a href="${slideInfo.lowRes}" class="lightbox-btn" download="Event_Image_B_Low.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">下载标准版</span><span class="lang-en">Download Low-Res</span></a>`;
                        const btnHigh = `<a href="${slideInfo.highRes}" class="lightbox-btn" download="Event_Image_B_High.jpg"><i class="fa-solid fa-download mr-2"></i><span class="lang-zh">下载高清版</span><span class="lang-en">Download High-Res</span></a>`;
                        downloadContainer.insertAdjacentHTML('beforeend', btnLow);
                        downloadContainer.insertAdjacentHTML('beforeend', btnHigh);
                    }
                    // 确保下载按钮的语言也同步切换
                    setLanguage(currentLang);
                });
            });

            // 关闭灯箱
            const closeLightbox = () => lightbox.style.display = 'none';
            closeLightboxBtn.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) closeLightbox();
            });
            
            // 初始化轮播
            showSlide(0);

            // --- Gallery Lightbox Logic ---
            function initializeGalleryLightbox() {
                // 获取所有画廊项目和灯箱元素
                const galleryItems = document.querySelectorAll('.gallery-item');
                const lightbox = document.getElementById('lightbox'); // 复用页面上已有的灯箱
                const lightboxImg = document.getElementById('lightbox-img');
                const downloadContainer = document.getElementById('download-container');

                // 确保灯箱元素存在
                if (!lightbox || !lightboxImg || galleryItems.length === 0) {
                    console.warn('Lightbox or gallery items not found. Gallery preview is disabled.');
                    return;
                }
                
                // 为每个画廊项目添加点击事件
                galleryItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const imgElement = item.querySelector('img');
                        if (!imgElement) return;

                        // 获取高清图的路径，如果data属性不存在，则使用src作为备用
                        const highResSrc = imgElement.dataset.lightboxSrc || imgElement.src;
                        
                        // 更新灯箱图片源并显示灯箱
                        lightboxImg.src = highResSrc;
                        lightbox.style.display = 'flex'; // 或者 'block'，取决于你的灯箱样式

                        // (可选) 清空或隐藏主视觉图灯箱里的下载按钮
                        if (downloadContainer) {
                            downloadContainer.innerHTML = ''; // 清空下载按钮，因为这些图没有下载链接
                        }
                    });
                });

                // 注意：关闭灯箱的逻辑（点击 '×' 或背景）应该已经存在于你的JS中，
                // 因为主视觉图轮播也使用同一个灯箱，所以这里无需重复编写关闭逻辑。
            }

            // 调用函数来初始化画廊的灯箱功能
            initializeGalleryLightbox();

            // --- 音乐播放器逻辑 ---
            const musicPlayer = document.getElementById('music-player');
            const audio = document.getElementById('background-audio');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const muteUnmuteBtn = document.getElementById('mute-unmute-btn');
            const volumeIcon = document.getElementById('volume-icon');
            const muteIcon = document.getElementById('mute-icon');
            let isAudioInitialized = false;

            // 音乐初始化函数：在用户首次交互时播放并取消静音
            const initializeAudio = () => {
                // 如果已经初始化过（有声且在播放），就直接返回
                if (audio.muted === false && !audio.paused) return;
                // 尝试播放（在某些情况下，即使是静音播放也可能需要用户交互来启动）
                // 并且取消静音
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // 播放成功后，取消静音
                        audio.muted = false;
                        console.log("音频已在用户交互后成功播放并取消静音。");
                        // 更新所有图标状态
                        // updatePlayPauseIcon();
                        // updateMuteIcon();
                        // 【重要】移除所有用于初始化的监听器，避免重复触发
                        document.body.removeEventListener('click', initializeAudio);
                        document.body.removeEventListener('touchstart', initializeAudio);
                        if (prevBtn) prevBtn.removeEventListener('click', initializeAudio);
                        if (nextBtn) nextBtn.removeEventListener('click', initializeAudio);
                    }).catch(error => {
                        console.error("在用户交互后播放音频失败:", error);
                    });
                }
                // 【重要】用 { once: true } 选项，这个监听器在执行一次后会自动移除，无需手动管理
            };

            // 监听用户首次交互以启动音频
            document.body.addEventListener('click', initializeAudio, { once: true });
            document.body.addEventListener('touchstart', initializeAudio, { once: true });
            window.addEventListener('scroll', initializeAudio, { once: true });
            if (prevBtn) prevBtn.addEventListener('click', initializeAudio);
            if (nextBtn) nextBtn.addEventListener('click', initializeAudio);

            // 尝试静音自动播放（在某些浏览器上可以工作）
            audio.play().catch(e => console.log("Muted autoplay failed, waiting for interaction."));

            const updatePlayPauseIcon = () => {
                playIcon.classList.toggle('hidden', !audio.paused);
                pauseIcon.classList.toggle('hidden', audio.paused);
            };

            const updateMuteIcon = () => {
                volumeIcon.classList.toggle('hidden', audio.muted);
                muteIcon.classList.toggle('hidden', !audio.muted);
            };

            playPauseBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // 防止事件冒泡
                if (audio.paused) {
                    audio.play().catch(e => console.error("Audio play failed", e));
                } else {
                    audio.pause();
                }
            });

            muteUnmuteBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // 防止事件冒泡
                audio.muted = !audio.muted;
                updateMuteIcon();
            });
            
            // 监听音频本身的播放/暂停事件，以同步UI
            audio.addEventListener('play', updatePlayPauseIcon);
            audio.addEventListener('pause', updatePlayPauseIcon);
            audio.addEventListener('volumechange', updateMuteIcon); // 当muted属性改变时会触发
            
            // 初始化图标状态
            updatePlayPauseIcon();
            updateMuteIcon();
            
            // --- MODIFIED: 全新的拖动逻辑 ---
            makeDraggable(musicPlayer);

            function makeDraggable(element) {
                let isDragging = false;
                let startX, startY, initialX, initialY;

                const onDragStart = (e) => {
                    // 如果点击的是按钮，则不触发拖动
                    if (e.target.closest('button')) {
                        return;
                    }
                    isDragging = true;
                    element.style.cursor = 'grabbing';
                    
                    const touch = e.touches ? e.touches[0] : e;
                    startX = touch.clientX;
                    startY = touch.clientY;
                    initialX = element.offsetLeft;
                    initialY = element.offsetTop;

                    // 移除 transform-origin 以便平滑拖动
                    element.classList.remove('transform-origin-bottom-right');
                    
                    document.addEventListener('mousemove', onDragMove);
                    document.addEventListener('touchmove', onDragMove, { passive: false });
                    document.addEventListener('mouseup', onDragEnd);
                    document.addEventListener('touchend', onDragEnd);
                    
                    // 阻止默认行为，如移动端的页面滚动
                    if (e.touches) e.preventDefault();
                };

                const onDragMove = (e) => {
                    if (!isDragging) return;
                    if (e.touches) e.preventDefault(); // 在 touchmove 中也要阻止
                    
                    const touch = e.touches ? e.touches[0] : e;
                    const deltaX = touch.clientX - startX;
                    const deltaY = touch.clientY - startY;

                    let newX = initialX + deltaX;
                    let newY = initialY + deltaY;

                    // 边界检测
                    const screenWidth = window.innerWidth;
                    const screenHeight = window.innerHeight;
                    const elWidth = element.offsetWidth;
                    const elHeight = element.offsetHeight;

                    if (newX < 0) newX = 0;
                    if (newY < 0) newY = 0;
                    if (newX > screenWidth - elWidth) newX = screenWidth - elWidth;
                    if (newY > screenHeight - elHeight) newY = screenHeight - elHeight;
                    
                    element.style.left = `${newX}px`;
                    element.style.top = `${newY}px`;
                    // 清除原来的 right 和 bottom 定位
                    element.style.right = 'auto';
                    element.style.bottom = 'auto';
                };

                const onDragEnd = () => {
                    isDragging = false;
                    element.style.cursor = 'grab';
                    
                    document.removeEventListener('mousemove', onDragMove);
                    document.removeEventListener('touchmove', onDragMove);
                    document.removeEventListener('mouseup', onDragEnd);
                    document.removeEventListener('touchend', onDragEnd);
                };

                element.addEventListener('mousedown', onDragStart);
                element.addEventListener('touchstart', onDragStart, { passive: false });
            }

            // --- Message Board Logic ---
            const messageContent = document.getElementById('message-content');
            const prevMessageBtn = document.getElementById('prev-message');
            const nextMessageBtn = document.getElementById('next-message');
            // const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const resetBtn = document.getElementById('reset-btn');

            // Default messages
            let messages = [
                {
                    words: "期待PPP的现场演出！已经准备好尖叫了！Poppin' Party的音乐总是能带给我无限的活力和快乐，每次听到他们的歌曲都会让我心情愉悦。这次能够亲临现场观看演出，我感到非常兴奋和激动，已经迫不及待想要感受现场的热烈氛围了！",
                    author: "粉丝小明"
                },
                {
                    words: "PPP的现场太精彩了！",
                    author: "粉丝小王"
                }
            ];

            // Store filtered messages
            let filteredMessages = [];
            let currentMessageIndex = 0;

            // Try to load messages from message_board.json
            function loadMessages() {
                const xhr = new XMLHttpRequest();
                xhr.open('GET', 'assets/data/message_board.json', true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            try {
                                const data = JSON.parse(xhr.responseText);
                                if (data && data.length > 0) {
                                    messages = data;
                                }
                            } catch (e) {
                                console.error('Error parsing message_board.json:', e);
                            }
                        } else {
                            console.error('Error loading message_board.json: Status', xhr.status);
                        }
                        // Initialize message board with either loaded or default messages
                        filteredMessages = [...messages];
                        displayMessage(currentMessageIndex);
                    }
                };
                xhr.onerror = function() {
                    console.error('Error loading message_board.json');
                    // Initialize message board with default messages
                    filteredMessages = [...messages];
                    displayMessage(currentMessageIndex);
                };
                try {
                    xhr.send();
                } catch (error) {
                    console.error('Error sending request for message_board.json:', error);
                    // Initialize message board with default messages
                    filteredMessages = [...messages];
                    displayMessage(currentMessageIndex);
                }
            }

            function displayMessage(index) {
                const message = filteredMessages[index];
                messageContent.innerHTML = `
                    <div class="w-full flex items-start justify-center pt-9">
                        <div class="text-center px-4">
                            <p class="text-gray-700 text-lg mb-2 italic">"${message.words}"</p>
                            <p class="text-gray-500 text-sm">- ${message.author}</p>
                        </div>
                    </div>
                `;
            }

            // Search functionality
            function searchMessages() {
                const searchTerm = searchInput.value.trim().toLowerCase();
                if (searchTerm === '') {
                    filteredMessages = [...messages];
                } else {
                    filteredMessages = messages.filter(message => 
                        message.author.toLowerCase().includes(searchTerm)
                    );
                }
                currentMessageIndex = 0;
                if (filteredMessages.length > 0) {
                    displayMessage(currentMessageIndex);
                } else {
                    messageContent.innerHTML = `
                        <div class="text-center">
                            <p class="text-gray-700 text-lg">未找到匹配的留言</p>
                        </div>
                    `;
                }
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            }

            // Reset functionality
            function resetMessages() {
                searchInput.value = '';
                filteredMessages = [...messages];
                currentMessageIndex = 0;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            }

            prevMessageBtn.addEventListener('click', () => {
                currentMessageIndex = (currentMessageIndex - 1 + filteredMessages.length) % filteredMessages.length;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            });

            nextMessageBtn.addEventListener('click', () => {
                currentMessageIndex = (currentMessageIndex + 1) % filteredMessages.length;
                displayMessage(currentMessageIndex);
                
                // Add animation effect
                messageContent.classList.add('animate-fadeIn');
                setTimeout(() => {
                    messageContent.classList.remove('animate-fadeIn');
                }, 500);
            });

            // Add search event listeners
            searchBtn.addEventListener('click', searchMessages);
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    searchMessages();
                }
            });
            resetBtn.addEventListener('click', resetMessages);

            // Load messages and initialize message board
            loadMessages();

            // --- Credits List Logic (支持邮件链接) ---
            function loadCredits() {
                fetch('assets/data/credits.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(creditsData => {
                        // Helper function to render a list of names, some with links
                        const renderCreditList = (elementId, peopleArray) => {
                            const container = document.getElementById(elementId);
                            if (!container || !Array.isArray(peopleArray)) {
                                if(container) container.textContent = "Data Error";
                                return;
                            }

                            // Clear "Loading..." text
                            container.innerHTML = '';

                            // Build the list with links and text
                            peopleArray.forEach((person, index) => {
                                // 1. Create the element for the person
                                let personElement;
                                if (person.email) {
                                    // If email exists, create an anchor tag
                                    personElement = document.createElement('a');
                                    personElement.href = `mailto:${person.email}`;
                                    personElement.className = 'credit-link';
                                    personElement.textContent = person.name;
                                } else {
                                    // Otherwise, create a simple text node
                                    personElement = document.createTextNode(person.name);
                                }
                                container.appendChild(personElement);

                                // 2. Add a separator, but not for the last person
                                if (index < peopleArray.length - 1) {
                                    const separator = document.createTextNode(', ');
                                    container.appendChild(separator);
                                }
                            });
                        };

                        // Populate each list using the new render function
                        renderCreditList('credits-web-writing', creditsData.web.writing);
                        renderCreditList('credits-web-testing', creditsData.web.testing);
                        renderCreditList('credits-artist', creditsData.artist);
                        renderCreditList('credits-flower-basket-organizer', creditsData.flower_basket.organizer);
                        renderCreditList('credits-flower-basket-participants', creditsData.flower_basket.participants);
                        renderCreditList('credits-free-gift-cards', creditsData.free_gift.cards);
                        renderCreditList('credits-free-gift-badges', creditsData.free_gift.badges);
                    })
                    .catch(error => {
                        console.error('无法加载致谢名单 (credits.json):', error);
                        const allCreditElements = document.querySelectorAll('[id^="credits-"]');
                        allCreditElements.forEach(el => {
                            el.textContent = '加载失败';
                        });
                    });
            }

            // 调用函数 (这行代码应该已经在你的脚本里了)
            loadCredits();

        });
    </script>
</body>
</html>
